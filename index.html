<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.12">
<title>The Clojure Style Guide</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:50%;border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<style>
pre.rouge table td { padding: 5px; }
pre.rouge table pre { margin: 0; }
pre.rouge .cm {
  color: #999988;
  font-style: italic;
}
pre.rouge .cp {
  color: #999999;
  font-weight: bold;
}
pre.rouge .c1 {
  color: #999988;
  font-style: italic;
}
pre.rouge .cs {
  color: #999999;
  font-weight: bold;
  font-style: italic;
}
pre.rouge .c, pre.rouge .cd {
  color: #999988;
  font-style: italic;
}
pre.rouge .err {
  color: #a61717;
  background-color: #e3d2d2;
}
pre.rouge .gd {
  color: #000000;
  background-color: #ffdddd;
}
pre.rouge .ge {
  color: #000000;
  font-style: italic;
}
pre.rouge .gr {
  color: #aa0000;
}
pre.rouge .gh {
  color: #999999;
}
pre.rouge .gi {
  color: #000000;
  background-color: #ddffdd;
}
pre.rouge .go {
  color: #888888;
}
pre.rouge .gp {
  color: #555555;
}
pre.rouge .gs {
  font-weight: bold;
}
pre.rouge .gu {
  color: #aaaaaa;
}
pre.rouge .gt {
  color: #aa0000;
}
pre.rouge .kc {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kd {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kn {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kp {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kr {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kt {
  color: #445588;
  font-weight: bold;
}
pre.rouge .k, pre.rouge .kv {
  color: #000000;
  font-weight: bold;
}
pre.rouge .mf {
  color: #009999;
}
pre.rouge .mh {
  color: #009999;
}
pre.rouge .il {
  color: #009999;
}
pre.rouge .mi {
  color: #009999;
}
pre.rouge .mo {
  color: #009999;
}
pre.rouge .m, pre.rouge .mb, pre.rouge .mx {
  color: #009999;
}
pre.rouge .sb {
  color: #d14;
}
pre.rouge .sc {
  color: #d14;
}
pre.rouge .sd {
  color: #d14;
}
pre.rouge .s2 {
  color: #d14;
}
pre.rouge .se {
  color: #d14;
}
pre.rouge .sh {
  color: #d14;
}
pre.rouge .si {
  color: #d14;
}
pre.rouge .sx {
  color: #d14;
}
pre.rouge .sr {
  color: #009926;
}
pre.rouge .s1 {
  color: #d14;
}
pre.rouge .ss {
  color: #990073;
}
pre.rouge .s {
  color: #d14;
}
pre.rouge .na {
  color: #008080;
}
pre.rouge .bp {
  color: #999999;
}
pre.rouge .nb {
  color: #0086B3;
}
pre.rouge .nc {
  color: #445588;
  font-weight: bold;
}
pre.rouge .no {
  color: #008080;
}
pre.rouge .nd {
  color: #3c5d5d;
  font-weight: bold;
}
pre.rouge .ni {
  color: #800080;
}
pre.rouge .ne {
  color: #990000;
  font-weight: bold;
}
pre.rouge .nf {
  color: #990000;
  font-weight: bold;
}
pre.rouge .nl {
  color: #990000;
  font-weight: bold;
}
pre.rouge .nn {
  color: #555555;
}
pre.rouge .nt {
  color: #000080;
}
pre.rouge .vc {
  color: #008080;
}
pre.rouge .vg {
  color: #008080;
}
pre.rouge .vi {
  color: #008080;
}
pre.rouge .nv {
  color: #008080;
}
pre.rouge .ow {
  color: #000000;
  font-weight: bold;
}
pre.rouge .o {
  color: #000000;
  font-weight: bold;
}
pre.rouge .w {
  color: #bbbbbb;
}
pre.rouge {
  background-color: #f8f8f8;
}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>The Clojure Style Guide</h1>
<div id="toc" class="toc2">
<div id="toctitle"><h2>Table of Contents</h2></div>
<ul class="sectlevel1">
<li><a href="#introduction">Introduction</a></li>
<li><a href="#source-code-layout-organization">Source Code Layout &amp; Organization</a>
<ul class="sectlevel2">
<li><a href="#80-character-limits">Maximum Line Length </a></li>
<li><a href="#spaces">Tabs vs Spaces</a></li>
<li><a href="#body-indentation">Body Indentation</a></li>
<li><a href="#vertically-align-fn-args">Function Arguments Alignment</a></li>
<li><a href="#one-space-indent">Arguments Indentation</a></li>
<li><a href="#bindings-alignment">Bindings Alignment</a></li>
<li><a href="#map-keys-alignment">Map Keys Alignment</a></li>
<li><a href="#crlf">Line Endings</a></li>
<li><a href="#terminate-files-with-a-newline">Terminate Files with a Newline</a></li>
<li><a href="#bracket-spacing">Bracket Spacing</a></li>
<li><a href="#no-commas-for-seq-literals">No Commas in Sequential Collection Literals</a></li>
<li><a href="#opt-commas-in-map-literals">Optional Commas In Map Literals</a></li>
<li><a href="#gather-trailing-parens">Gather Trailing Parentheses</a></li>
<li><a href="#empty-lines-between-top-level-forms">Empty Lines Between Top Level Forms</a></li>
<li><a href="#no-blank-lines-within-def-forms">No Blank Lines Within Definition Forms</a></li>
<li><a href="#no-trailing-whitespace">No Trailing Whitespace</a></li>
<li><a href="#one-file-per-namespace">One File Per Namespace</a></li>
</ul>
</li>
<li><a href="#namespace-declaration">Namespace Declaration</a>
<ul class="sectlevel2">
<li><a href="#no-single-segment-namespaces">No Single Segment Namespaces</a></li>
<li><a href="#namespace-segments-limit">Namespace Segments Limit</a></li>
<li><a href="#comprehensive-ns-declaration">Comprehensive <code>ns</code> Form</a></li>
<li><a href="#line-break-ns-declaration">Line Breaks in <code>ns</code></a></li>
<li><a href="#prefer-require-over-use">Prefer <code>:require</code> Over <code>:use</code></a></li>
<li><a href="#sort-requirements-and-imports">Sort requirements and imports</a></li>
</ul>
</li>
<li><a href="#functions">Functions</a>
<ul class="sectlevel2">
<li><a href="#optional-new-line-after-fn-name">Optional New Line After Fn Name</a></li>
<li><a href="#multimethod-dispatch-val-placement">Multimethod Dispatch Val Placement</a></li>
<li><a href="#oneline-short-fn">Oneline Short Fn</a></li>
<li><a href="#multiple-arity-indentation">Multiple Arity Indentation</a></li>
<li><a href="#multiple-arity-order">Multiple Arity Order</a></li>
<li><a href="#function-length">Function Length</a></li>
<li><a href="#function-positional-parameter-limit">Function Positional Parameters Limit</a></li>
<li><a href="#pre-post-conditions">Pre and Post Conditions</a></li>
</ul>
</li>
<li><a href="#idioms">Idioms</a>
<ul class="sectlevel2">
<li><a href="#ns-fns-only-in-repl">Dynamic Namespace Manipulation</a></li>
<li><a href="#forward-references">Forward References</a></li>
<li><a href="#declare">Declare</a></li>
<li><a href="#higher-order-fns">Higher-order Functions</a></li>
<li><a href="#dont-def-vars-inside-fns">Vars Inside Functions</a></li>
<li><a href="#dont-shadow-clojure-core">Shadowing <code>clojure.core</code> Names</a></li>
<li><a href="#alter-var">Alter Var Binding</a></li>
<li><a href="#nil-punning">Nil Punning</a></li>
<li><a href="#to-vector">Converting Sequences to Vectors</a></li>
<li><a href="#when-instead-of-single-branch-if"><code>when</code> vs <code>if</code></a></li>
<li><a href="#if-let"><code>if-let</code></a></li>
<li><a href="#when-let"><code>when-let</code></a></li>
<li><a href="#if-not"><code>if-not</code></a></li>
<li><a href="#when-not"><code>when-not</code></a></li>
<li><a href="#when-not-instead-of-single-branch-if-not"><code>when-not</code> vs <code>if-not</code></a></li>
<li><a href="#not-equal"><code>not=</code></a></li>
<li><a href="#printf"><code>printf</code></a></li>
<li><a href="#multiple-arity-of-gt-and-ls-fns">Flexible Comparison Functions</a></li>
<li><a href="#single-param-fn-literal">Single Param Fn Literal</a></li>
<li><a href="#multiple-params-fn-literal">Multiple Params Fn Literal</a></li>
<li><a href="#no-useless-anonymous-fns">No Useless Anonymous Fns</a></li>
<li><a href="#no-multiple-forms-fn-literals">No Multiple Forms Fn Literals</a></li>
<li><a href="#complement"><code>complement</code></a></li>
<li><a href="#comp"><code>comp</code></a></li>
<li><a href="#partial"><code>partial</code></a></li>
<li><a href="#threading-macros">Threading Macros</a></li>
<li><a href="#threading-macros-alignment">Threading Macros Alignment</a></li>
<li><a href="#else-keyword-in-cond">Default <code>cond</code> Branch</a></li>
<li><a href="#condp"><code>condp</code> vs <code>cond</code></a></li>
<li><a href="#case"><code>case</code> vs <code>cond/condp</code></a></li>
<li><a href="#short-forms-in-cond">Short Forms In Cond</a></li>
<li><a href="#set-as-predicate">Set As Predicate</a></li>
<li><a href="#inc-and-dec"><code>inc</code> and <code>dec</code></a></li>
<li><a href="#pos-and-neg"><code>pos?</code> and <code>neg?</code></a></li>
<li><a href="#list-star-instead-of-nested-cons"><code>list*</code> vs <code>cons</code></a></li>
<li><a href="#sugared-java-interop">Sugared Java Interop</a></li>
<li><a href="#compact-metadata-notation-for-true-flags">Compact Metadata Notation For True Flags</a></li>
<li><a href="#private">Private</a></li>
<li><a href="#access-private-var">Access Private Var</a></li>
<li><a href="#attach-metadata-carefully">Attach Metadata Carefully</a></li>
</ul>
</li>
<li><a href="#naming">Naming</a>
<ul class="sectlevel2">
<li><a href="#naming-ns-naming-schemas">Namespace Naming Schemas</a></li>
<li><a href="#naming-namespace-composite-segments">Composite Word Namespace Segments</a></li>
<li><a href="#naming-functions-and-variables">Functions and Variables</a></li>
<li><a href="#naming-protocols-records-structs-and-types">Protocols, Records, Structs And Types</a></li>
<li><a href="#naming-predicates">Predicate Methods</a></li>
<li><a href="#naming-unsafe-functions">Unsafe Functions</a></li>
<li><a href="#naming-conversion-functions">Conversion Functions</a></li>
<li><a href="#naming-dynamic-vars">Dynamic Vars</a></li>
<li><a href="#naming-constants">Constants</a></li>
<li><a href="#naming-unused-bindings">Unused Bindings</a></li>
<li><a href="#idiomatic-names">Idiomatic Names</a></li>
</ul>
</li>
<li><a href="#data-structures">Data Structures</a>
<ul class="sectlevel2">
<li><a href="#avoid-lists">Avoid Lists</a></li>
<li><a href="#keywords-for-hash-keys">Keywords For Hash Keys</a></li>
<li><a href="#literal-col-syntax">Literal Col Syntax</a></li>
<li><a href="#avoid-index-based-coll-access">Avoid Index Based Coll Access</a></li>
<li><a href="#keywords-as-fn-to-get-map-values">Keywords As Fn To Get Map Values</a></li>
<li><a href="#colls-as-fns">Colls As Fns</a></li>
<li><a href="#keywords-as-fns">Keywords As Fns</a></li>
<li><a href="#avoid-transient-colls">Avoid Transient Colls</a></li>
<li><a href="#avoid-java-colls">Avoid Java Colls</a></li>
<li><a href="#avoid-java-arrays">Avoid Java Arrays</a></li>
</ul>
</li>
<li><a href="#types-records">Types &amp; Records</a>
<ul class="sectlevel2">
<li><a href="#record-constructors">Record Constructors</a></li>
<li><a href="#custom-record-constructors">Custom Record Constructors</a></li>
<li><a href="#custom-record-constructors-naming">Custom Record Constructors Naming</a></li>
</ul>
</li>
<li><a href="#mutation">Mutation</a>
<ul class="sectlevel2">
<li><a href="#Refs">Refs</a></li>
<li><a href="#Agents">Agents</a></li>
<li><a href="#Atoms">Atoms</a></li>
</ul>
</li>
<li><a href="#strings">Strings</a>
<ul class="sectlevel2">
<li><a href="#prefer-clojure-string-over-interop">Prefer Clojure String Over Interop</a></li>
</ul>
</li>
<li><a href="#exceptions">Exceptions</a>
<ul class="sectlevel2">
<li><a href="#reuse-existing-exception-types">Reuse Existing Exception Types</a></li>
<li><a href="#prefer-with-open-over-finally">Prefer <code>with-open</code> Over <code>finally</code></a></li>
</ul>
</li>
<li><a href="#macros">Macros</a>
<ul class="sectlevel2">
<li><a href="#dont-write-macro-if-fn-will-do">Don&#8217;t Write Macro If Fn Will Do</a></li>
<li><a href="#write-macro-usage-before-writing-the-macro">Write Macro Usage Before Writing The Macro</a></li>
<li><a href="#break-complicated-macros">Break Complicated Macros</a></li>
<li><a href="#macros-as-syntactic-sugar">Macros As Syntactic Sugar</a></li>
<li><a href="#syntax-quoted-forms">Syntax Quoted Forms</a></li>
</ul>
</li>
<li><a href="#comments">Comments</a>
<ul class="sectlevel2">
<li><a href="#self-documenting-code">Self Documenting Code</a></li>
<li><a href="#four-semicolons-for-heading-comments">Four Semicolons For Heading Comments</a></li>
<li><a href="#three-semicolons-for-top-level-comments">Three Semicolons For Top Level Comments</a></li>
<li><a href="#two-semicolons-for-code-fragment">Two Semicolons For Code Fragment</a></li>
<li><a href="#one-semicolon-for-margin-comments">One Semicolon For Margin Comments</a></li>
<li><a href="#semicolon-space">Semicolon Space</a></li>
<li><a href="#english-syntax">English Syntax</a></li>
<li><a href="#no-superfluous-comments">No Superfluous Comments</a></li>
<li><a href="#comment-upkeep">Comment Upkeep</a></li>
<li><a href="#dash-underscore-reader-macro">Dash Underscore Reader Macro</a></li>
<li><a href="#refactor-dont-comment">Refactor Don&#8217;t Comment</a></li>
<li><a href="#comment-annotations">Comment Annotations</a></li>
</ul>
</li>
<li><a href="#documentation">Documentation</a>
<ul class="sectlevel2">
<li><a href="#prefer-docstrings">Prefer Docstrings</a></li>
<li><a href="#docstring-summary">Docstring Summary</a></li>
<li><a href="#markdown-docstrings">Leverage Markdown in Docstrings</a></li>
<li><a href="#document-pos-arguments">Document Positional Arguments</a></li>
<li><a href="#document-references">Document References</a></li>
<li><a href="#docstring-grammar">Docstring Grammar</a></li>
<li><a href="#docstring-indentation">Docstring Indentation</a></li>
<li><a href="#docstring-leading-trailing-whitespace">Docstring Leading Trailing Whitespace</a></li>
<li><a href="#docstring-after-fn-name">Docstring After Fn Name</a></li>
</ul>
</li>
<li><a href="#existential">Existential</a>
<ul class="sectlevel2">
<li><a href="#be-functional">Be Functional</a></li>
<li><a href="#be-consistent">Be Consistent</a></li>
<li><a href="#common-sense">Common Sense</a></li>
</ul>
</li>
<li><a href="#testing">Testing</a>
<ul class="sectlevel2">
<li><a href="#test-directory-structure">Test Directory Structure</a></li>
<li><a href="#test-ns-naming">Test Namespace Naming</a></li>
<li><a href="#test-naming">Test Naming</a></li>
</ul>
</li>
<li><a href="#library-organization">Library Organization</a>
<ul class="sectlevel2">
<li><a href="#lib-coordinates">Library Coordinates</a></li>
<li><a href="#lib-min-dependencies">Minimize Dependencies</a></li>
<li><a href="#lib-core-separate-from-tools">Tool-agnostic</a></li>
</ul>
</li>
<li><a href="#lint-tools">Lint Tools</a></li>
<li><a href="#contributing">Contributing</a></li>
<li><a href="#license">License</a></li>
<li><a href="#spread-the-word">Spread the Word</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="introduction"><a class="anchor" href="#introduction"></a><a class="link" href="#introduction">Introduction</a></h2>
<div class="sectionbody">
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Role models are important.</p>
</div>
</blockquote>
<div class="attribution">
&#8212; Officer Alex J. Murphy / RoboCop
</div>
</div>
<div class="paragraph">
<p>This Clojure style guide recommends best practices so that real-world Clojure
programmers can write code that can be maintained by other real-world Clojure
programmers. A style guide that reflects real-world usage gets used, and a
style guide that holds to an ideal that has been rejected by the people it is
supposed to help risks not getting used at all&#8201;&#8212;&#8201;no matter how good it is.</p>
</div>
<div class="paragraph">
<p>The guide is separated into several sections of related rules. I&#8217;ve
tried to add the rationale behind the rules (if it&#8217;s omitted, I&#8217;ve
assumed that it&#8217;s pretty obvious).</p>
</div>
<div class="paragraph">
<p>I didn&#8217;t come up with all the rules out of nowhere; they are mostly
based on my extensive career as a professional software engineer,
feedback and suggestions from members of the Clojure community, and
various highly regarded Clojure programming resources, such as
<a href="http://www.clojurebook.com/">"Clojure Programming"</a>
and <a href="http://joyofclojure.com/">"The Joy of Clojure"</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The guide is still a work in progress; some sections are missing,
others are incomplete, some rules are lacking examples, some rules
don&#8217;t have examples that illustrate them clearly enough. In due time
these issues will be addressed&#8201;&#8212;&#8201;just keep them in mind for now.
Help us address those shortcomings and make this guide better together!
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Please note, that the Clojure developing community maintains a list of
<a href="https://clojure.org/community/contrib_howto#_coding_guidelines">coding standards for libraries</a>,
too.</p>
</div>
<div class="paragraph">
<p>Translations of the guide are available in the following languages:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/geekerzp/clojure-style-guide/blob/master/README-zhCN.md">Chinese</a></p>
</li>
<li>
<p><a href="https://github.com/totakke/clojure-style-guide/blob/ja/README.adoc">Japanese</a></p>
</li>
<li>
<p><a href="https://github.com/kwakbab/clojure-style-guide/blob/master/README-koKO.md">Korean</a></p>
</li>
<li>
<p><a href="https://github.com/theSkilled/clojure-style-guide/blob/pt-BR/README.md">Portuguese</a> (Under progress)</p>
</li>
<li>
<p><a href="https://github.com/Nondv/clojure-style-guide/blob/master/ru/README.md">Russian</a></p>
</li>
<li>
<p><a href="https://github.com/jeko2000/clojure-style-guide/blob/master/README.md">Spanish</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="source-code-layout-organization"><a class="anchor" href="#source-code-layout-organization"></a><a class="link" href="#source-code-layout-organization">Source Code Layout &amp; Organization</a></h2>
<div class="sectionbody">
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Nearly everybody is convinced that every style but their own is
ugly and unreadable. Leave out the "but their own" and they&#8217;re
probably right&#8230;&#8203;</p>
</div>
</blockquote>
<div class="attribution">
&#8212; Jerry Coffin (on indentation)
</div>
</div>
<div class="sect2">
<h3 id="80-character-limits"><a class="anchor" href="#80-character-limits"></a><a class="link" href="#80-character-limits">Maximum Line Length <a id="line-length"></a></a></h3>
<div class="paragraph">
<p>Where feasible, avoid making lines longer than 80 characters.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Why Bother with 80 characters in a World of Modern Widescreen Displays?</div>
<div class="paragraph">
<p>A lot of people these days feel that a maximum line length of 80 characters is
just a remnant of the past and makes little sense today. After all - modern
displays can easily fit 200+ characters on a single line.  Still, there are some
important benefits to be gained from sticking to shorter lines of code.</p>
</div>
<div class="paragraph">
<p>First, and foremost - numerous studies have shown that humans read much faster
vertically and very long lines of text impede the reading process. As noted
earlier, one of the guiding principles of this style guide is to optimize the
code we write for human consumption.</p>
</div>
<div class="paragraph">
<p>Additionally, limiting the required editor window width makes it possible to
have several files open side-by-side, and works well when using code review
tools that present the two versions in adjacent columns.</p>
</div>
<div class="paragraph">
<p>The default wrapping in most tools disrupts the visual structure of the code,
making it more difficult to understand. The limits are chosen to avoid wrapping
in editors with the window width set to 80, even if the tool places a marker
glyph in the final column when wrapping lines. Some web based tools may not
offer dynamic line wrapping at all.</p>
</div>
<div class="paragraph">
<p>Some teams strongly prefer a longer line length. For code maintained exclusively
or primarily by a team that can reach agreement on this issue, it is okay to
increase the line length limit up to 100 characters, or all the way up
to 120 characters. Please, restrain the urge to go beyond 120 characters.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="spaces"><a class="anchor" href="#spaces"></a><a class="link" href="#spaces">Tabs vs Spaces</a></h3>
<div class="paragraph">
<p>Use <strong>spaces</strong> for indentation. No hard tabs.</p>
</div>
</div>
<div class="sect2">
<h3 id="body-indentation"><a class="anchor" href="#body-indentation"></a><a class="link" href="#body-indentation">Body Indentation</a></h3>
<div class="paragraph">
<p>Use 2 spaces to indent the bodies of
forms that have body parameters.  This covers all <code>def</code> forms, special
forms and macros that introduce local bindings (e.g. <code>loop</code>, <code>let</code>,
<code>when-let</code>) and many macros like <code>when</code>, <code>cond</code>, <code>as-&gt;</code>, <code>cond-&gt;</code>, <code>case</code>,
<code>with-*</code>, etc.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="nb">when</span><span class="w"> </span><span class="n">something</span><span class="w">
  </span><span class="p">(</span><span class="nf">something-else</span><span class="p">))</span><span class="w">

</span><span class="p">(</span><span class="nb">with-out-str</span><span class="w">
  </span><span class="p">(</span><span class="nb">println</span><span class="w"> </span><span class="s">"Hello, "</span><span class="p">)</span><span class="w">
  </span><span class="p">(</span><span class="nb">println</span><span class="w"> </span><span class="s">"world!"</span><span class="p">))</span><span class="w">

</span><span class="c1">;; bad - four spaces</span><span class="w">
</span><span class="p">(</span><span class="nb">when</span><span class="w"> </span><span class="n">something</span><span class="w">
    </span><span class="p">(</span><span class="nf">something-else</span><span class="p">))</span><span class="w">

</span><span class="c1">;; bad - one space</span><span class="w">
</span><span class="p">(</span><span class="nb">with-out-str</span><span class="w">
 </span><span class="p">(</span><span class="nb">println</span><span class="w"> </span><span class="s">"Hello, "</span><span class="p">)</span><span class="w">
 </span><span class="p">(</span><span class="nb">println</span><span class="w"> </span><span class="s">"world!"</span><span class="p">))</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="vertically-align-fn-args"><a class="anchor" href="#vertically-align-fn-args"></a><a class="link" href="#vertically-align-fn-args">Function Arguments Alignment</a></h3>
<div class="paragraph">
<p>Vertically align function (macro) arguments spanning multiple lines.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="nb">filter</span><span class="w"> </span><span class="n">even?</span><span class="w">
        </span><span class="p">(</span><span class="nb">range</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">10</span><span class="p">))</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="nb">filter</span><span class="w"> </span><span class="n">even?</span><span class="w">
  </span><span class="p">(</span><span class="nb">range</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">10</span><span class="p">))</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="one-space-indent"><a class="anchor" href="#one-space-indent"></a><a class="link" href="#one-space-indent">Arguments Indentation</a></h3>
<div class="paragraph">
<p>Use a single space indentation for function (macro) arguments
when there are no arguments on the same line as the function name.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="nb">filter</span><span class="w">
 </span><span class="n">even?</span><span class="w">
 </span><span class="p">(</span><span class="nb">range</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">10</span><span class="p">))</span><span class="w">

</span><span class="p">(</span><span class="nb">or</span><span class="w">
 </span><span class="n">ala</span><span class="w">
 </span><span class="n">bala</span><span class="w">
 </span><span class="n">portokala</span><span class="p">)</span><span class="w">

</span><span class="c1">;; bad - two-space indent</span><span class="w">
</span><span class="p">(</span><span class="nb">filter</span><span class="w">
  </span><span class="n">even?</span><span class="w">
  </span><span class="p">(</span><span class="nb">range</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">10</span><span class="p">))</span><span class="w">

</span><span class="p">(</span><span class="nb">or</span><span class="w">
  </span><span class="n">ala</span><span class="w">
  </span><span class="n">bala</span><span class="w">
  </span><span class="n">portokala</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="bindings-alignment"><a class="anchor" href="#bindings-alignment"></a><a class="link" href="#bindings-alignment">Bindings Alignment</a></h3>
<div class="paragraph">
<p>Vertically align <code>let</code> (and <code>let</code>-like) bindings.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="k">let</span><span class="w"> </span><span class="p">[</span><span class="n">thing1</span><span class="w"> </span><span class="s">"some stuff"</span><span class="w">
      </span><span class="n">thing2</span><span class="w"> </span><span class="s">"other stuff"</span><span class="p">]</span><span class="w">
  </span><span class="p">(</span><span class="nf">foo</span><span class="w"> </span><span class="n">thing1</span><span class="w"> </span><span class="n">thing2</span><span class="p">))</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="k">let</span><span class="w"> </span><span class="p">[</span><span class="n">thing1</span><span class="w"> </span><span class="s">"some stuff"</span><span class="w">
  </span><span class="n">thing2</span><span class="w"> </span><span class="s">"other stuff"</span><span class="p">]</span><span class="w">
  </span><span class="p">(</span><span class="nf">foo</span><span class="w"> </span><span class="n">thing1</span><span class="w"> </span><span class="n">thing2</span><span class="p">))</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="map-keys-alignment"><a class="anchor" href="#map-keys-alignment"></a><a class="link" href="#map-keys-alignment">Map Keys Alignment</a></h3>
<div class="paragraph">
<p>Align vertically map keys.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">{</span><span class="no">:thing1</span><span class="w"> </span><span class="n">thing1</span><span class="w">
 </span><span class="no">:thing2</span><span class="w"> </span><span class="n">thing2</span><span class="p">}</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">{</span><span class="no">:thing1</span><span class="w"> </span><span class="n">thing1</span><span class="w">
</span><span class="no">:thing2</span><span class="w"> </span><span class="n">thing2</span><span class="p">}</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">{</span><span class="no">:thing1</span><span class="w"> </span><span class="n">thing1</span><span class="w">
  </span><span class="no">:thing2</span><span class="w"> </span><span class="n">thing2</span><span class="p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="crlf"><a class="anchor" href="#crlf"></a><a class="link" href="#crlf">Line Endings</a></h3>
<div class="paragraph">
<p>Use Unix-style line endings.<sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup></p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>If you&#8217;re using Git you might want to add the following
configuration setting to protect your project from Windows line
endings creeping in:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">$ </span>git config <span class="nt">--global</span> core.autocrlf <span class="nb">true</span></code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="terminate-files-with-a-newline"><a class="anchor" href="#terminate-files-with-a-newline"></a><a class="link" href="#terminate-files-with-a-newline">Terminate Files with a Newline</a></h3>
<div class="paragraph">
<p>End each file with a newline.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
This should be done by through editor configuration, not manually.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="bracket-spacing"><a class="anchor" href="#bracket-spacing"></a><a class="link" href="#bracket-spacing">Bracket Spacing</a></h3>
<div class="paragraph">
<p>If any text precedes an opening bracket(<code>(</code>, <code>{</code> and
<code>[</code>) or follows a closing bracket(<code>)</code>, <code>}</code> and <code>]</code>), separate that
text from that bracket with a space. Conversely, leave no space after
an opening bracket and before following text, or after preceding text
and before a closing bracket.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="nf">foo</span><span class="w"> </span><span class="p">(</span><span class="nf">bar</span><span class="w"> </span><span class="n">baz</span><span class="p">)</span><span class="w"> </span><span class="n">quux</span><span class="p">)</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="nf">foo</span><span class="p">(</span><span class="nf">bar</span><span class="w"> </span><span class="n">baz</span><span class="p">)</span><span class="n">quux</span><span class="p">)</span><span class="w">
</span><span class="p">(</span><span class="nf">foo</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="nf">bar</span><span class="w"> </span><span class="n">baz</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="n">quux</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="no-commas-for-seq-literals"><a class="anchor" href="#no-commas-for-seq-literals"></a><a class="link" href="#no-commas-for-seq-literals">No Commas in Sequential Collection Literals</a></h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Syntactic sugar causes semicolon cancer.</p>
</div>
</blockquote>
<div class="attribution">
&#8212; Alan Perlis
</div>
</div>
<div class="paragraph">
<p>Don&#8217;t use commas between the elements of sequential collection literals.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">[</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">]</span><span class="w">
</span><span class="p">(</span><span class="nf">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">[</span><span class="mi">1</span><span class="n">,</span><span class="w"> </span><span class="mi">2</span><span class="n">,</span><span class="w"> </span><span class="mi">3</span><span class="p">]</span><span class="w">
</span><span class="p">(</span><span class="nf">1,</span><span class="w"> </span><span class="mi">2</span><span class="n">,</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="opt-commas-in-map-literals"><a class="anchor" href="#opt-commas-in-map-literals"></a><a class="link" href="#opt-commas-in-map-literals">Optional Commas In Map Literals</a></h3>
<div class="paragraph">
<p>Consider enhancing the readability of map literals via judicious use
of commas and line breaks.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">{</span><span class="no">:name</span><span class="w"> </span><span class="s">"Bruce Wayne"</span><span class="w"> </span><span class="no">:alter-ego</span><span class="w"> </span><span class="s">"Batman"</span><span class="p">}</span><span class="w">

</span><span class="c1">;; good and arguably a bit more readable</span><span class="w">
</span><span class="p">{</span><span class="no">:name</span><span class="w"> </span><span class="s">"Bruce Wayne"</span><span class="w">
 </span><span class="no">:alter-ego</span><span class="w"> </span><span class="s">"Batman"</span><span class="p">}</span><span class="w">

</span><span class="c1">;; good and arguably more compact</span><span class="w">
</span><span class="p">{</span><span class="no">:name</span><span class="w"> </span><span class="s">"Bruce Wayne"</span><span class="n">,</span><span class="w"> </span><span class="no">:alter-ego</span><span class="w"> </span><span class="s">"Batman"</span><span class="p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="gather-trailing-parens"><a class="anchor" href="#gather-trailing-parens"></a><a class="link" href="#gather-trailing-parens">Gather Trailing Parentheses</a></h3>
<div class="paragraph">
<p>Place all trailing parentheses on a single line instead of distinct lines.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good; single line</span><span class="w">
</span><span class="p">(</span><span class="nb">when</span><span class="w"> </span><span class="n">something</span><span class="w">
  </span><span class="p">(</span><span class="nf">something-else</span><span class="p">))</span><span class="w">

</span><span class="c1">;; bad; distinct lines</span><span class="w">
</span><span class="p">(</span><span class="nb">when</span><span class="w"> </span><span class="n">something</span><span class="w">
  </span><span class="p">(</span><span class="nf">something-else</span><span class="p">)</span><span class="w">
</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="empty-lines-between-top-level-forms"><a class="anchor" href="#empty-lines-between-top-level-forms"></a><a class="link" href="#empty-lines-between-top-level-forms">Empty Lines Between Top Level Forms</a></h3>
<div class="paragraph">
<p>Use a single empty line between top-level forms.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="k">def</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">...</span><span class="p">)</span><span class="w">

</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="n">...</span><span class="p">)</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="k">def</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">...</span><span class="p">)</span><span class="w">
</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="n">...</span><span class="p">)</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="k">def</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">...</span><span class="p">)</span><span class="w">


</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="n">...</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>An exception to the rule is the grouping of related <code>def</code>s together.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="k">def</span><span class="w"> </span><span class="n">min-rows</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span><span class="w">
</span><span class="p">(</span><span class="k">def</span><span class="w"> </span><span class="n">max-rows</span><span class="w"> </span><span class="mi">20</span><span class="p">)</span><span class="w">
</span><span class="p">(</span><span class="k">def</span><span class="w"> </span><span class="n">min-cols</span><span class="w"> </span><span class="mi">15</span><span class="p">)</span><span class="w">
</span><span class="p">(</span><span class="k">def</span><span class="w"> </span><span class="n">max-cols</span><span class="w"> </span><span class="mi">30</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="no-blank-lines-within-def-forms"><a class="anchor" href="#no-blank-lines-within-def-forms"></a><a class="link" href="#no-blank-lines-within-def-forms">No Blank Lines Within Definition Forms</a></h3>
<div class="paragraph">
<p>Do not place blank lines in the middle of a function or
macro definition.  An exception can be made to indicate grouping of
pairwise constructs as found in e.g. <code>let</code> and <code>cond</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="no-trailing-whitespace"><a class="anchor" href="#no-trailing-whitespace"></a><a class="link" href="#no-trailing-whitespace">No Trailing Whitespace</a></h3>
<div class="paragraph">
<p>Avoid trailing whitespace.</p>
</div>
</div>
<div class="sect2">
<h3 id="one-file-per-namespace"><a class="anchor" href="#one-file-per-namespace"></a><a class="link" href="#one-file-per-namespace">One File Per Namespace</a></h3>
<div class="paragraph">
<p>Use one file per namespace and one namespace per file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>;; good
(ns foo.bar)

;; bad
(ns foo.bar)
(ns baz.qux)

;; bad
(in-ns quux.quuz)
(in-ns quuz.corge)

;; bad
(ns foo.bar) or (in-ns foo.bar) in multiple files</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="namespace-declaration"><a class="anchor" href="#namespace-declaration"></a><a class="link" href="#namespace-declaration">Namespace Declaration</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="no-single-segment-namespaces"><a class="anchor" href="#no-single-segment-namespaces"></a><a class="link" href="#no-single-segment-namespaces">No Single Segment Namespaces</a></h3>
<div class="paragraph">
<p>Avoid single-segment namespaces.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="nf">ns</span><span class="w"> </span><span class="n">example.ns</span><span class="p">)</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="nf">ns</span><span class="w"> </span><span class="n">example</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="namespace-segments-limit"><a class="anchor" href="#namespace-segments-limit"></a><a class="link" href="#namespace-segments-limit">Namespace Segments Limit</a></h3>
<div class="paragraph">
<p>Avoid the use of overly long namespaces (i.e., more than 5 segments).</p>
</div>
</div>
<div class="sect2">
<h3 id="comprehensive-ns-declaration"><a class="anchor" href="#comprehensive-ns-declaration"></a><a class="link" href="#comprehensive-ns-declaration">Comprehensive <code>ns</code> Form</a></h3>
<div class="paragraph">
<p>Start every namespace with a comprehensive <code>ns</code> form, comprised of
<code>refer</code>s, <code>require</code>s, and <code>import</code>s, conventionally in that order.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="p">(</span><span class="nf">ns</span><span class="w"> </span><span class="n">examples.ns</span><span class="w">
  </span><span class="p">(</span><span class="no">:refer-clojure</span><span class="w"> </span><span class="no">:exclude</span><span class="w"> </span><span class="p">[</span><span class="nb">next</span><span class="w"> </span><span class="nb">replace</span><span class="w"> </span><span class="nb">remove</span><span class="p">])</span><span class="w">
  </span><span class="p">(</span><span class="no">:require</span><span class="w"> </span><span class="p">[</span><span class="n">clojure.string</span><span class="w"> </span><span class="no">:as</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="no">:refer</span><span class="w"> </span><span class="p">[</span><span class="n">blank?</span><span class="p">]])</span><span class="w">
  </span><span class="p">(</span><span class="no">:import</span><span class="w"> </span><span class="n">java.util.Date</span><span class="p">))</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="line-break-ns-declaration"><a class="anchor" href="#line-break-ns-declaration"></a><a class="link" href="#line-break-ns-declaration">Line Breaks in <code>ns</code></a></h3>
<div class="paragraph">
<p>When there are multiple dependencies, you may want give each one its own line.
This facilitates sorting, readability, and cleaner diffs for dependency changes.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; better</span><span class="w">
</span><span class="p">(</span><span class="nf">ns</span><span class="w"> </span><span class="n">examples.ns</span><span class="w">
  </span><span class="p">(</span><span class="no">:require</span><span class="w">
   </span><span class="p">[</span><span class="n">clojure.string</span><span class="w"> </span><span class="no">:as</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="no">:refer</span><span class="w"> </span><span class="p">[</span><span class="n">blank?</span><span class="p">]]</span><span class="w">
   </span><span class="p">[</span><span class="n">clojure.set</span><span class="w"> </span><span class="no">:as</span><span class="w"> </span><span class="nb">set</span><span class="p">]</span><span class="w">
   </span><span class="p">[</span><span class="n">clojure.java.shell</span><span class="w"> </span><span class="no">:as</span><span class="w"> </span><span class="n">sh</span><span class="p">])</span><span class="w">
  </span><span class="p">(</span><span class="no">:import</span><span class="w">
   </span><span class="n">java.util.Date</span><span class="w">
   </span><span class="n">java.text.SimpleDateFormat</span><span class="w">
   </span><span class="p">[</span><span class="n">java.util.concurrent</span><span class="w"> </span><span class="n">Executors</span><span class="w">
                         </span><span class="n">LinkedBlockingQueue</span><span class="p">]))</span><span class="w">

</span><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="nf">ns</span><span class="w"> </span><span class="n">examples.ns</span><span class="w">
  </span><span class="p">(</span><span class="no">:require</span><span class="w"> </span><span class="p">[</span><span class="n">clojure.string</span><span class="w"> </span><span class="no">:as</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="no">:refer</span><span class="w"> </span><span class="p">[</span><span class="n">blank?</span><span class="p">]]</span><span class="w">
            </span><span class="p">[</span><span class="n">clojure.set</span><span class="w"> </span><span class="no">:as</span><span class="w"> </span><span class="nb">set</span><span class="p">]</span><span class="w">
            </span><span class="p">[</span><span class="n">clojure.java.shell</span><span class="w"> </span><span class="no">:as</span><span class="w"> </span><span class="n">sh</span><span class="p">])</span><span class="w">
  </span><span class="p">(</span><span class="no">:import</span><span class="w"> </span><span class="n">java.util.Date</span><span class="w">
           </span><span class="n">java.text.SimpleDateFormat</span><span class="w">
           </span><span class="p">[</span><span class="n">java.util.concurrent</span><span class="w"> </span><span class="n">Executors</span><span class="w">
                                 </span><span class="n">LinkedBlockingQueue</span><span class="p">]))</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="nf">ns</span><span class="w"> </span><span class="n">examples.ns</span><span class="w">
  </span><span class="p">(</span><span class="no">:require</span><span class="w"> </span><span class="p">[</span><span class="n">clojure.string</span><span class="w"> </span><span class="no">:as</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="no">:refer</span><span class="w"> </span><span class="p">[</span><span class="n">blank?</span><span class="p">]]</span><span class="w"> </span><span class="p">[</span><span class="n">clojure.set</span><span class="w"> </span><span class="no">:as</span><span class="w"> </span><span class="nb">set</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="n">clojure.java.shell</span><span class="w"> </span><span class="no">:as</span><span class="w"> </span><span class="n">sh</span><span class="p">])</span><span class="w">
  </span><span class="p">(</span><span class="no">:import</span><span class="w"> </span><span class="n">java.util.Date</span><span class="w"> </span><span class="n">java.text.SimpleDateFormat</span><span class="w"> </span><span class="p">[</span><span class="n">java.util.concurrent</span><span class="w"> </span><span class="n">Executors</span><span class="w"> </span><span class="n">LinkedBlockingQueue</span><span class="p">]))</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="prefer-require-over-use"><a class="anchor" href="#prefer-require-over-use"></a><a class="link" href="#prefer-require-over-use">Prefer <code>:require</code> Over <code>:use</code></a></h3>
<div class="paragraph">
<p>In the <code>ns</code> form prefer <code>:require :as</code> over <code>:require :refer</code> over <code>:require
:refer :all</code>.  Prefer <code>:require</code> over <code>:use</code>; the latter form should be
considered deprecated for new code.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="nf">ns</span><span class="w"> </span><span class="n">examples.ns</span><span class="w">
  </span><span class="p">(</span><span class="no">:require</span><span class="w"> </span><span class="p">[</span><span class="n">clojure.zip</span><span class="w"> </span><span class="no">:as</span><span class="w"> </span><span class="n">zip</span><span class="p">]))</span><span class="w">

</span><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="nf">ns</span><span class="w"> </span><span class="n">examples.ns</span><span class="w">
  </span><span class="p">(</span><span class="no">:require</span><span class="w"> </span><span class="p">[</span><span class="n">clojure.zip</span><span class="w"> </span><span class="no">:refer</span><span class="w"> </span><span class="p">[</span><span class="nb">lefts</span><span class="w"> </span><span class="nb">rights</span><span class="p">]]))</span><span class="w">

</span><span class="c1">;; acceptable as warranted</span><span class="w">
</span><span class="p">(</span><span class="nf">ns</span><span class="w"> </span><span class="n">examples.ns</span><span class="w">
  </span><span class="p">(</span><span class="no">:require</span><span class="w"> </span><span class="p">[</span><span class="n">clojure.zip</span><span class="w"> </span><span class="no">:refer</span><span class="w"> </span><span class="no">:all</span><span class="p">]))</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="nf">ns</span><span class="w"> </span><span class="n">examples.ns</span><span class="w">
  </span><span class="p">(</span><span class="no">:use</span><span class="w"> </span><span class="n">clojure.zip</span><span class="p">))</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="sort-requirements-and-imports"><a class="anchor" href="#sort-requirements-and-imports"></a><a class="link" href="#sort-requirements-and-imports">Sort requirements and imports</a></h3>
<div class="paragraph">
<p>In the <code>ns</code> form, sort your requirements and imports. This facilitates readability and avoids duplication, especially when the list of required / imported namespaces is very long.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="nf">ns</span><span class="w"> </span><span class="n">examples.ns</span><span class="w">
  </span><span class="p">(</span><span class="no">:require</span><span class="w">
   </span><span class="p">[</span><span class="n">baz.core</span><span class="w"> </span><span class="no">:as</span><span class="w"> </span><span class="n">baz</span><span class="p">]</span><span class="w">
   </span><span class="p">[</span><span class="n">clojure.java.shell</span><span class="w"> </span><span class="no">:as</span><span class="w"> </span><span class="n">sh</span><span class="p">]</span><span class="w">
   </span><span class="p">[</span><span class="n">clojure.set</span><span class="w"> </span><span class="no">:as</span><span class="w"> </span><span class="nb">set</span><span class="p">]</span><span class="w">
   </span><span class="p">[</span><span class="n">clojure.string</span><span class="w"> </span><span class="no">:as</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="no">:refer</span><span class="w"> </span><span class="p">[</span><span class="n">blank?</span><span class="p">]]</span><span class="w">
   </span><span class="p">[</span><span class="n">foo.bar</span><span class="w"> </span><span class="no">:as</span><span class="w"> </span><span class="n">foo</span><span class="p">]))</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="nf">ns</span><span class="w"> </span><span class="n">examples.ns</span><span class="w">
  </span><span class="p">(</span><span class="no">:require</span><span class="w">
   </span><span class="p">[</span><span class="n">clojure.string</span><span class="w"> </span><span class="no">:as</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="no">:refer</span><span class="w"> </span><span class="p">[</span><span class="n">blank?</span><span class="p">]]</span><span class="w">
   </span><span class="p">[</span><span class="n">clojure.set</span><span class="w"> </span><span class="no">:as</span><span class="w"> </span><span class="nb">set</span><span class="p">]</span><span class="w">
   </span><span class="p">[</span><span class="n">baz.core</span><span class="w"> </span><span class="no">:as</span><span class="w"> </span><span class="n">baz</span><span class="p">]</span><span class="w">
   </span><span class="p">[</span><span class="n">foo.bar</span><span class="w"> </span><span class="no">:as</span><span class="w"> </span><span class="n">foo</span><span class="p">]</span><span class="w">
   </span><span class="p">[</span><span class="n">clojure.java.shell</span><span class="w"> </span><span class="no">:as</span><span class="w"> </span><span class="n">sh</span><span class="p">]))</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="functions"><a class="anchor" href="#functions"></a><a class="link" href="#functions">Functions</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="optional-new-line-after-fn-name"><a class="anchor" href="#optional-new-line-after-fn-name"></a><a class="link" href="#optional-new-line-after-fn-name">Optional New Line After Fn Name</a></h3>
<div class="paragraph">
<p>Optionally omit the new line between the function name and argument
vector for <code>defn</code> when there is no docstring.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">foo</span><span class="w">
  </span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="w">
  </span><span class="p">(</span><span class="nf">bar</span><span class="w"> </span><span class="n">x</span><span class="p">))</span><span class="w">

</span><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="w">
  </span><span class="p">(</span><span class="nf">bar</span><span class="w"> </span><span class="n">x</span><span class="p">))</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">foo</span><span class="w">
  </span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="w"> </span><span class="p">(</span><span class="nf">bar</span><span class="w"> </span><span class="n">x</span><span class="p">))</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="multimethod-dispatch-val-placement"><a class="anchor" href="#multimethod-dispatch-val-placement"></a><a class="link" href="#multimethod-dispatch-val-placement">Multimethod Dispatch Val Placement</a></h3>
<div class="paragraph">
<p>Place the <code>dispatch-val</code> of a multimethod on the same line as the
function name.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="k">defmethod</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="no">:bar</span><span class="w"> </span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="w"> </span><span class="p">(</span><span class="nf">baz</span><span class="w"> </span><span class="n">x</span><span class="p">))</span><span class="w">

</span><span class="p">(</span><span class="k">defmethod</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="no">:bar</span><span class="w">
  </span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="w">
  </span><span class="p">(</span><span class="nf">baz</span><span class="w"> </span><span class="n">x</span><span class="p">))</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="k">defmethod</span><span class="w"> </span><span class="n">foo</span><span class="w">
  </span><span class="no">:bar</span><span class="w">
  </span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="w">
  </span><span class="p">(</span><span class="nf">baz</span><span class="w"> </span><span class="n">x</span><span class="p">))</span><span class="w">

</span><span class="p">(</span><span class="k">defmethod</span><span class="w"> </span><span class="n">foo</span><span class="w">
  </span><span class="no">:bar</span><span class="w"> </span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="w">
  </span><span class="p">(</span><span class="nf">baz</span><span class="w"> </span><span class="n">x</span><span class="p">))</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="oneline-short-fn"><a class="anchor" href="#oneline-short-fn"></a><a class="link" href="#oneline-short-fn">Oneline Short Fn</a></h3>
<div class="paragraph">
<p>Optionally omit the new line between the argument vector and a short
function body.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="w">
  </span><span class="p">(</span><span class="nf">bar</span><span class="w"> </span><span class="n">x</span><span class="p">))</span><span class="w">

</span><span class="c1">;; good for a small function body</span><span class="w">
</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="w"> </span><span class="p">(</span><span class="nf">bar</span><span class="w"> </span><span class="n">x</span><span class="p">))</span><span class="w">

</span><span class="c1">;; good for multi-arity functions</span><span class="w">
</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">foo</span><span class="w">
  </span><span class="p">([</span><span class="n">x</span><span class="p">]</span><span class="w"> </span><span class="p">(</span><span class="nf">bar</span><span class="w"> </span><span class="n">x</span><span class="p">))</span><span class="w">
  </span><span class="p">([</span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="p">]</span><span class="w">
   </span><span class="p">(</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nf">predicate?</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w">
     </span><span class="p">(</span><span class="nf">bar</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w">
     </span><span class="p">(</span><span class="nf">baz</span><span class="w"> </span><span class="n">x</span><span class="p">))))</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">foo</span><span class="w">
  </span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="w"> </span><span class="p">(</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nf">predicate?</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w">
        </span><span class="p">(</span><span class="nf">bar</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w">
        </span><span class="p">(</span><span class="nf">baz</span><span class="w"> </span><span class="n">x</span><span class="p">)))</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="multiple-arity-indentation"><a class="anchor" href="#multiple-arity-indentation"></a><a class="link" href="#multiple-arity-indentation">Multiple Arity Indentation</a></h3>
<div class="paragraph">
<p>Indent each arity form of a function definition vertically aligned with its
parameters.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">foo</span><span class="w">
  </span><span class="s">"I have two arities."</span><span class="w">
  </span><span class="p">([</span><span class="n">x</span><span class="p">]</span><span class="w">
   </span><span class="p">(</span><span class="nf">foo</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="mi">1</span><span class="p">))</span><span class="w">
  </span><span class="p">([</span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="p">]</span><span class="w">
   </span><span class="p">(</span><span class="nb">+</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="p">)))</span><span class="w">

</span><span class="c1">;; bad - extra indentation</span><span class="w">
</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">foo</span><span class="w">
  </span><span class="s">"I have two arities."</span><span class="w">
  </span><span class="p">([</span><span class="n">x</span><span class="p">]</span><span class="w">
    </span><span class="p">(</span><span class="nf">foo</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="mi">1</span><span class="p">))</span><span class="w">
  </span><span class="p">([</span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="p">]</span><span class="w">
    </span><span class="p">(</span><span class="nb">+</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="p">)))</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="multiple-arity-order"><a class="anchor" href="#multiple-arity-order"></a><a class="link" href="#multiple-arity-order">Multiple Arity Order</a></h3>
<div class="paragraph">
<p>Sort the arities of a function
from fewest to most arguments. The common case of multi-arity
functions is that some K arguments fully specifies the function&#8217;s
behavior, and that arities N &lt; K partially apply the K arity, and
arities N &gt; K provide a fold of the K arity over varargs.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good - it's easy to scan for the nth arity</span><span class="w">
</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">foo</span><span class="w">
  </span><span class="s">"I have two arities."</span><span class="w">
  </span><span class="p">([</span><span class="n">x</span><span class="p">]</span><span class="w">
   </span><span class="p">(</span><span class="nf">foo</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="mi">1</span><span class="p">))</span><span class="w">
  </span><span class="p">([</span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="p">]</span><span class="w">
   </span><span class="p">(</span><span class="nb">+</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="p">)))</span><span class="w">

</span><span class="c1">;; okay - the other arities are applications of the two-arity</span><span class="w">
</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">foo</span><span class="w">
  </span><span class="s">"I have two arities."</span><span class="w">
  </span><span class="p">([</span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="p">]</span><span class="w">
   </span><span class="p">(</span><span class="nb">+</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="p">))</span><span class="w">
  </span><span class="p">([</span><span class="n">x</span><span class="p">]</span><span class="w">
   </span><span class="p">(</span><span class="nf">foo</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="mi">1</span><span class="p">))</span><span class="w">
  </span><span class="p">([</span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">more</span><span class="p">]</span><span class="w">
   </span><span class="p">(</span><span class="nb">reduce</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="p">(</span><span class="nf">foo</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="p">(</span><span class="nf">foo</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="n">z</span><span class="p">))</span><span class="w"> </span><span class="n">more</span><span class="p">)))</span><span class="w">

</span><span class="c1">;; bad - unordered for no apparent reason</span><span class="w">
</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">foo</span><span class="w">
  </span><span class="p">([</span><span class="n">x</span><span class="p">]</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w">
  </span><span class="p">([</span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="n">z</span><span class="p">]</span><span class="w"> </span><span class="p">(</span><span class="nf">foo</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="p">(</span><span class="nf">foo</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="n">z</span><span class="p">)))</span><span class="w">
  </span><span class="p">([</span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="p">]</span><span class="w"> </span><span class="p">(</span><span class="nb">+</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="p">))</span><span class="w">
  </span><span class="p">([</span><span class="n">w</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">more</span><span class="p">]</span><span class="w"> </span><span class="p">(</span><span class="nb">reduce</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="p">(</span><span class="nf">foo</span><span class="w"> </span><span class="n">w</span><span class="w"> </span><span class="p">(</span><span class="nf">foo</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="p">(</span><span class="nf">foo</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="n">z</span><span class="p">)))</span><span class="w"> </span><span class="n">more</span><span class="p">)))</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="function-length"><a class="anchor" href="#function-length"></a><a class="link" href="#function-length">Function Length</a></h3>
<div class="paragraph">
<p>Avoid functions longer than 10 LOC (lines of code). Ideally, most
functions will be shorter than 5 LOC.</p>
</div>
</div>
<div class="sect2">
<h3 id="function-positional-parameter-limit"><a class="anchor" href="#function-positional-parameter-limit"></a><a class="link" href="#function-positional-parameter-limit">Function Positional Parameters Limit</a></h3>
<div class="paragraph">
<p>Avoid parameter lists with more than three or four positional parameters.</p>
</div>
</div>
<div class="sect2">
<h3 id="pre-post-conditions"><a class="anchor" href="#pre-post-conditions"></a><a class="link" href="#pre-post-conditions">Pre and Post Conditions</a></h3>
<div class="paragraph">
<p>Prefer function pre and post conditions to checks inside a function&#8217;s body.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="w">
  </span><span class="p">{</span><span class="no">:pre</span><span class="w"> </span><span class="p">[(</span><span class="nb">pos?</span><span class="w"> </span><span class="n">x</span><span class="p">)]}</span><span class="w">
  </span><span class="p">(</span><span class="nf">bar</span><span class="w"> </span><span class="n">x</span><span class="p">))</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="w">
  </span><span class="p">(</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb">pos?</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w">
    </span><span class="p">(</span><span class="nf">bar</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w">
    </span><span class="p">(</span><span class="nf">throw</span><span class="w"> </span><span class="p">(</span><span class="nf">IllegalArgumentException.</span><span class="w"> </span><span class="s">"x must be a positive number!"</span><span class="p">)))</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="idioms"><a class="anchor" href="#idioms"></a><a class="link" href="#idioms">Idioms</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="ns-fns-only-in-repl"><a class="anchor" href="#ns-fns-only-in-repl"></a><a class="link" href="#ns-fns-only-in-repl">Dynamic Namespace Manipulation</a></h3>
<div class="paragraph">
<p>Avoid the use of namespace-manipulating functions like <code>require</code> and
<code>refer</code>. They are entirely unnecessary outside of a REPL
environment.</p>
</div>
</div>
<div class="sect2">
<h3 id="forward-references"><a class="anchor" href="#forward-references"></a><a class="link" href="#forward-references">Forward References</a></h3>
<div class="paragraph">
<p>Avoid forward references.  They are occasionally necessary, but such occasions
are rare in practice.</p>
</div>
</div>
<div class="sect2">
<h3 id="declare"><a class="anchor" href="#declare"></a><a class="link" href="#declare">Declare</a></h3>
<div class="paragraph">
<p>Use <code>declare</code> to enable forward references when forward references are
necessary.</p>
</div>
</div>
<div class="sect2">
<h3 id="higher-order-fns"><a class="anchor" href="#higher-order-fns"></a><a class="link" href="#higher-order-fns">Higher-order Functions</a></h3>
<div class="paragraph">
<p>Prefer higher-order functions like <code>map</code> to <code>loop/recur</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="dont-def-vars-inside-fns"><a class="anchor" href="#dont-def-vars-inside-fns"></a><a class="link" href="#dont-def-vars-inside-fns">Vars Inside Functions</a></h3>
<div class="paragraph">
<p>Don&#8217;t define vars inside functions.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; very bad</span><span class="w">
</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">(</span><span class="k">def</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span><span class="w">
  </span><span class="n">...</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="dont-shadow-clojure-core"><a class="anchor" href="#dont-shadow-clojure-core"></a><a class="link" href="#dont-shadow-clojure-core">Shadowing <code>clojure.core</code> Names</a></h3>
<div class="paragraph">
<p>Don&#8217;t shadow <code>clojure.core</code> names with local bindings.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; bad - clojure.core/map must be fully qualified inside the function</span><span class="w">
</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="p">[</span><span class="nb">map</span><span class="p">]</span><span class="w">
  </span><span class="n">...</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="alter-var"><a class="anchor" href="#alter-var"></a><a class="link" href="#alter-var">Alter Var Binding</a></h3>
<div class="paragraph">
<p>Use <code>alter-var-root</code> instead of <code>def</code> to change the value of a var.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="k">def</span><span class="w"> </span><span class="n">thing</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="c1">; value of thing is now 1</span><span class="w">
</span><span class="c1">; do some stuff with thing</span><span class="w">
</span><span class="p">(</span><span class="nf">alter-var-root</span><span class="w"> </span><span class="o">#</span><span class="ss">'thing</span><span class="w"> </span><span class="p">(</span><span class="nb">constantly</span><span class="w"> </span><span class="n">nil</span><span class="p">))</span><span class="w"> </span><span class="c1">; value of thing is now nil</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="k">def</span><span class="w"> </span><span class="n">thing</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w">
</span><span class="c1">; do some stuff with thing</span><span class="w">
</span><span class="p">(</span><span class="k">def</span><span class="w"> </span><span class="n">thing</span><span class="w"> </span><span class="n">nil</span><span class="p">)</span><span class="w">
</span><span class="c1">; value of thing is now nil</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="nil-punning"><a class="anchor" href="#nil-punning"></a><a class="link" href="#nil-punning">Nil Punning</a></h3>
<div class="paragraph">
<p>Use <code>seq</code> as a terminating condition to test whether a sequence is
empty (this technique is sometimes called <em>nil punning</em>).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">print-seq</span><span class="w"> </span><span class="p">[</span><span class="n">s</span><span class="p">]</span><span class="w">
  </span><span class="p">(</span><span class="nb">when</span><span class="w"> </span><span class="p">(</span><span class="nb">seq</span><span class="w"> </span><span class="n">s</span><span class="p">)</span><span class="w">
    </span><span class="p">(</span><span class="nb">prn</span><span class="w"> </span><span class="p">(</span><span class="nb">first</span><span class="w"> </span><span class="n">s</span><span class="p">))</span><span class="w">
    </span><span class="p">(</span><span class="nf">recur</span><span class="w"> </span><span class="p">(</span><span class="nb">rest</span><span class="w"> </span><span class="n">s</span><span class="p">))))</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">print-seq</span><span class="w"> </span><span class="p">[</span><span class="n">s</span><span class="p">]</span><span class="w">
  </span><span class="p">(</span><span class="nb">when-not</span><span class="w"> </span><span class="p">(</span><span class="nf">empty?</span><span class="w"> </span><span class="n">s</span><span class="p">)</span><span class="w">
    </span><span class="p">(</span><span class="nb">prn</span><span class="w"> </span><span class="p">(</span><span class="nb">first</span><span class="w"> </span><span class="n">s</span><span class="p">))</span><span class="w">
    </span><span class="p">(</span><span class="nf">recur</span><span class="w"> </span><span class="p">(</span><span class="nb">rest</span><span class="w"> </span><span class="n">s</span><span class="p">))))</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="to-vector"><a class="anchor" href="#to-vector"></a><a class="link" href="#to-vector">Converting Sequences to Vectors</a></h3>
<div class="paragraph">
<p>Prefer <code>vec</code> over <code>into</code> when you need to convert a sequence into a vector.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="nf">vec</span><span class="w"> </span><span class="n">some-seq</span><span class="p">)</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="nb">into</span><span class="w"> </span><span class="p">[]</span><span class="w"> </span><span class="n">some-seq</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="when-instead-of-single-branch-if"><a class="anchor" href="#when-instead-of-single-branch-if"></a><a class="link" href="#when-instead-of-single-branch-if"><code>when</code> vs <code>if</code></a></h3>
<div class="paragraph">
<p>Use <code>when</code> instead of <code>(if &#8230;&#8203; (do &#8230;&#8203;))</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="nb">when</span><span class="w"> </span><span class="n">pred</span><span class="w">
  </span><span class="p">(</span><span class="nf">foo</span><span class="p">)</span><span class="w">
  </span><span class="p">(</span><span class="nf">bar</span><span class="p">))</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="k">if</span><span class="w"> </span><span class="n">pred</span><span class="w">
  </span><span class="p">(</span><span class="nf">do</span><span class="w">
    </span><span class="p">(</span><span class="nf">foo</span><span class="p">)</span><span class="w">
    </span><span class="p">(</span><span class="nf">bar</span><span class="p">)))</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="if-let"><a class="anchor" href="#if-let"></a><a class="link" href="#if-let"><code>if-let</code></a></h3>
<div class="paragraph">
<p>Use <code>if-let</code> instead of <code>let</code> + <code>if</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="nb">if-let</span><span class="w"> </span><span class="p">[</span><span class="n">result</span><span class="w"> </span><span class="p">(</span><span class="nf">foo</span><span class="w"> </span><span class="n">x</span><span class="p">)]</span><span class="w">
  </span><span class="p">(</span><span class="nf">something-with</span><span class="w"> </span><span class="n">result</span><span class="p">)</span><span class="w">
  </span><span class="p">(</span><span class="nf">something-else</span><span class="p">))</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="k">let</span><span class="w"> </span><span class="p">[</span><span class="n">result</span><span class="w"> </span><span class="p">(</span><span class="nf">foo</span><span class="w"> </span><span class="n">x</span><span class="p">)]</span><span class="w">
  </span><span class="p">(</span><span class="k">if</span><span class="w"> </span><span class="n">result</span><span class="w">
    </span><span class="p">(</span><span class="nf">something-with</span><span class="w"> </span><span class="n">result</span><span class="p">)</span><span class="w">
    </span><span class="p">(</span><span class="nf">something-else</span><span class="p">)))</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="when-let"><a class="anchor" href="#when-let"></a><a class="link" href="#when-let"><code>when-let</code></a></h3>
<div class="paragraph">
<p>Use <code>when-let</code> instead of <code>let</code> + <code>when</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="nb">when-let</span><span class="w"> </span><span class="p">[</span><span class="n">result</span><span class="w"> </span><span class="p">(</span><span class="nf">foo</span><span class="w"> </span><span class="n">x</span><span class="p">)]</span><span class="w">
  </span><span class="p">(</span><span class="nf">do-something-with</span><span class="w"> </span><span class="n">result</span><span class="p">)</span><span class="w">
  </span><span class="p">(</span><span class="nf">do-something-more-with</span><span class="w"> </span><span class="n">result</span><span class="p">))</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="k">let</span><span class="w"> </span><span class="p">[</span><span class="n">result</span><span class="w"> </span><span class="p">(</span><span class="nf">foo</span><span class="w"> </span><span class="n">x</span><span class="p">)]</span><span class="w">
  </span><span class="p">(</span><span class="nb">when</span><span class="w"> </span><span class="n">result</span><span class="w">
    </span><span class="p">(</span><span class="nf">do-something-with</span><span class="w"> </span><span class="n">result</span><span class="p">)</span><span class="w">
    </span><span class="p">(</span><span class="nf">do-something-more-with</span><span class="w"> </span><span class="n">result</span><span class="p">)))</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="if-not"><a class="anchor" href="#if-not"></a><a class="link" href="#if-not"><code>if-not</code></a></h3>
<div class="paragraph">
<p>Use <code>if-not</code> instead of <code>(if (not &#8230;&#8203;) &#8230;&#8203;)</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="nf">if-not</span><span class="w"> </span><span class="n">pred</span><span class="w">
  </span><span class="p">(</span><span class="nf">foo</span><span class="p">))</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb">not</span><span class="w"> </span><span class="n">pred</span><span class="p">)</span><span class="w">
  </span><span class="p">(</span><span class="nf">foo</span><span class="p">))</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="when-not"><a class="anchor" href="#when-not"></a><a class="link" href="#when-not"><code>when-not</code></a></h3>
<div class="paragraph">
<p>Use <code>when-not</code> instead of <code>(when (not &#8230;&#8203;) &#8230;&#8203;)</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="nb">when-not</span><span class="w"> </span><span class="n">pred</span><span class="w">
  </span><span class="p">(</span><span class="nf">foo</span><span class="p">)</span><span class="w">
  </span><span class="p">(</span><span class="nf">bar</span><span class="p">))</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="nb">when</span><span class="w"> </span><span class="p">(</span><span class="nb">not</span><span class="w"> </span><span class="n">pred</span><span class="p">)</span><span class="w">
  </span><span class="p">(</span><span class="nf">foo</span><span class="p">)</span><span class="w">
  </span><span class="p">(</span><span class="nf">bar</span><span class="p">))</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="when-not-instead-of-single-branch-if-not"><a class="anchor" href="#when-not-instead-of-single-branch-if-not"></a><a class="link" href="#when-not-instead-of-single-branch-if-not"><code>when-not</code> vs <code>if-not</code></a></h3>
<div class="paragraph">
<p>Use <code>when-not</code> instead of <code>(if-not &#8230;&#8203; (do &#8230;&#8203;))</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="nb">when-not</span><span class="w"> </span><span class="n">pred</span><span class="w">
  </span><span class="p">(</span><span class="nf">foo</span><span class="p">)</span><span class="w">
  </span><span class="p">(</span><span class="nf">bar</span><span class="p">))</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="nf">if-not</span><span class="w"> </span><span class="n">pred</span><span class="w">
  </span><span class="p">(</span><span class="nf">do</span><span class="w">
    </span><span class="p">(</span><span class="nf">foo</span><span class="p">)</span><span class="w">
    </span><span class="p">(</span><span class="nf">bar</span><span class="p">)))</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="not-equal"><a class="anchor" href="#not-equal"></a><a class="link" href="#not-equal"><code>not=</code></a></h3>
<div class="paragraph">
<p>Use <code>not=</code> instead of <code>(not (= &#8230;&#8203;))</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="nb">not=</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="n">bar</span><span class="p">)</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="nb">not</span><span class="w"> </span><span class="p">(</span><span class="nb">=</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="n">bar</span><span class="p">))</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="printf"><a class="anchor" href="#printf"></a><a class="link" href="#printf"><code>printf</code></a></h3>
<div class="paragraph">
<p>Use <code>printf</code> instead of <code>(print (format &#8230;&#8203;))</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="nf">printf</span><span class="w"> </span><span class="s">"Hello, %s!\n"</span><span class="w"> </span><span class="nb">name</span><span class="p">)</span><span class="w">

</span><span class="c1">;; ok</span><span class="w">
</span><span class="p">(</span><span class="nb">println</span><span class="w"> </span><span class="p">(</span><span class="nf">format</span><span class="w"> </span><span class="s">"Hello, %s!"</span><span class="w"> </span><span class="nb">name</span><span class="p">))</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="multiple-arity-of-gt-and-ls-fns"><a class="anchor" href="#multiple-arity-of-gt-and-ls-fns"></a><a class="link" href="#multiple-arity-of-gt-and-ls-fns">Flexible Comparison Functions</a></h3>
<div class="paragraph">
<p>When doing comparisons, keep in mind that Clojure&#8217;s functions <code>&lt;</code>,
<code>&gt;</code>, etc. accept a variable number of arguments.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="nb">&lt;</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="nb">and</span><span class="w"> </span><span class="p">(</span><span class="nb">&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nb">&lt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="mi">10</span><span class="p">))</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="single-param-fn-literal"><a class="anchor" href="#single-param-fn-literal"></a><a class="link" href="#single-param-fn-literal">Single Param Fn Literal</a></h3>
<div class="paragraph">
<p>Prefer <code>%</code> over <code>%1</code> in function literals with only one parameter.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="o">#</span><span class="p">(</span><span class="nf">Math/round</span><span class="w"> </span><span class="n">%</span><span class="p">)</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="o">#</span><span class="p">(</span><span class="nf">Math/round</span><span class="w"> </span><span class="n">%1</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="multiple-params-fn-literal"><a class="anchor" href="#multiple-params-fn-literal"></a><a class="link" href="#multiple-params-fn-literal">Multiple Params Fn Literal</a></h3>
<div class="paragraph">
<p>Prefer <code>%1</code> over <code>%</code> in function literals with more than one parameter.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="o">#</span><span class="p">(</span><span class="nf">Math/pow</span><span class="w"> </span><span class="n">%1</span><span class="w"> </span><span class="n">%2</span><span class="p">)</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="o">#</span><span class="p">(</span><span class="nf">Math/pow</span><span class="w"> </span><span class="n">%</span><span class="w"> </span><span class="n">%2</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="no-useless-anonymous-fns"><a class="anchor" href="#no-useless-anonymous-fns"></a><a class="link" href="#no-useless-anonymous-fns">No Useless Anonymous Fns</a></h3>
<div class="paragraph">
<p>Don&#8217;t wrap functions in anonymous functions when you don&#8217;t need to.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="nb">filter</span><span class="w"> </span><span class="n">even?</span><span class="w"> </span><span class="p">(</span><span class="nb">range</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">10</span><span class="p">))</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="nb">filter</span><span class="w"> </span><span class="o">#</span><span class="p">(</span><span class="nf">even?</span><span class="w"> </span><span class="n">%</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nb">range</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">10</span><span class="p">))</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="no-multiple-forms-fn-literals"><a class="anchor" href="#no-multiple-forms-fn-literals"></a><a class="link" href="#no-multiple-forms-fn-literals">No Multiple Forms Fn Literals</a></h3>
<div class="paragraph">
<p>Don&#8217;t use function literals if the function body will consist of
more than one form.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="k">fn</span><span class="w"> </span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="w">
  </span><span class="p">(</span><span class="nb">println</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w">
  </span><span class="p">(</span><span class="nb">*</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="mi">2</span><span class="p">))</span><span class="w">

</span><span class="c1">;; bad (you need an explicit do form)</span><span class="w">
</span><span class="o">#</span><span class="p">(</span><span class="nf">do</span><span class="w"> </span><span class="p">(</span><span class="nb">println</span><span class="w"> </span><span class="n">%</span><span class="p">)</span><span class="w">
     </span><span class="p">(</span><span class="nb">*</span><span class="w"> </span><span class="n">%</span><span class="w"> </span><span class="mi">2</span><span class="p">))</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="complement"><a class="anchor" href="#complement"></a><a class="link" href="#complement"><code>complement</code></a></h3>
<div class="paragraph">
<p>Favor the use of <code>complement</code> versus the use of an anonymous function.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="nb">filter</span><span class="w"> </span><span class="p">(</span><span class="nb">complement</span><span class="w"> </span><span class="n">some-pred?</span><span class="p">)</span><span class="w"> </span><span class="n">coll</span><span class="p">)</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="nb">filter</span><span class="w"> </span><span class="o">#</span><span class="p">(</span><span class="nb">not</span><span class="w"> </span><span class="p">(</span><span class="nf">some-pred?</span><span class="w"> </span><span class="n">%</span><span class="p">))</span><span class="w"> </span><span class="n">coll</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This rule should obviously be ignored if the complementing predicate
exists in the form of a separate function (e.g. <code>even?</code> and <code>odd?</code>).</p>
</div>
</div>
<div class="sect2">
<h3 id="comp"><a class="anchor" href="#comp"></a><a class="link" href="#comp"><code>comp</code></a></h3>
<div class="paragraph">
<p>Favor <code>comp</code> over anonymous functions for function composition.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; Assuming `(:require [clojure.string :as str])`...</span><span class="w">

</span><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="nb">map</span><span class="w"> </span><span class="o">#</span><span class="p">(</span><span class="nf">str/capitalize</span><span class="w"> </span><span class="p">(</span><span class="nf">str/trim</span><span class="w"> </span><span class="n">%</span><span class="p">))</span><span class="w"> </span><span class="p">[</span><span class="s">"top "</span><span class="w"> </span><span class="s">" test "</span><span class="p">])</span><span class="w">

</span><span class="c1">;; better</span><span class="w">
</span><span class="p">(</span><span class="nb">map</span><span class="w"> </span><span class="p">(</span><span class="nb">comp</span><span class="w"> </span><span class="n">str/capitalize</span><span class="w"> </span><span class="n">str/trim</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="s">"top "</span><span class="w"> </span><span class="s">" test "</span><span class="p">])</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="partial"><a class="anchor" href="#partial"></a><a class="link" href="#partial"><code>partial</code></a></h3>
<div class="paragraph">
<p>Favor <code>partial</code> over anonymous functions for currying.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="nb">map</span><span class="w"> </span><span class="o">#</span><span class="p">(</span><span class="nb">+</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="n">%</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nb">range</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">10</span><span class="p">))</span><span class="w">

</span><span class="c1">;; (arguably) better</span><span class="w">
</span><span class="p">(</span><span class="nb">map</span><span class="w"> </span><span class="p">(</span><span class="nb">partial</span><span class="w"> </span><span class="nb">+</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nb">range</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">10</span><span class="p">))</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="threading-macros"><a class="anchor" href="#threading-macros"></a><a class="link" href="#threading-macros">Threading Macros</a></h3>
<div class="paragraph">
<p>Prefer the use of the threading macros <code>-&gt;</code> (thread-first) and <code>-&gt;&gt;</code>
(thread-last) to heavy form nesting.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="nb">-&gt;</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">]</span><span class="w">
    </span><span class="nb">reverse</span><span class="w">
    </span><span class="p">(</span><span class="nb">conj</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span><span class="w">
    </span><span class="nb">prn</span><span class="p">)</span><span class="w">

</span><span class="c1">;; not as good</span><span class="w">
</span><span class="p">(</span><span class="nb">prn</span><span class="w"> </span><span class="p">(</span><span class="nb">conj</span><span class="w"> </span><span class="p">(</span><span class="nb">reverse</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">])</span><span class="w">
           </span><span class="mi">4</span><span class="p">))</span><span class="w">

</span><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="nf">-&gt;&gt;</span><span class="w"> </span><span class="p">(</span><span class="nb">range</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span><span class="w">
     </span><span class="p">(</span><span class="nb">filter</span><span class="w"> </span><span class="n">even?</span><span class="p">)</span><span class="w">
     </span><span class="p">(</span><span class="nb">map</span><span class="w"> </span><span class="p">(</span><span class="nb">partial</span><span class="w"> </span><span class="nb">*</span><span class="w"> </span><span class="mi">2</span><span class="p">)))</span><span class="w">

</span><span class="c1">;; not as good</span><span class="w">
</span><span class="p">(</span><span class="nb">map</span><span class="w"> </span><span class="p">(</span><span class="nb">partial</span><span class="w"> </span><span class="nb">*</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w">
     </span><span class="p">(</span><span class="nb">filter</span><span class="w"> </span><span class="n">even?</span><span class="w"> </span><span class="p">(</span><span class="nb">range</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">10</span><span class="p">)))</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="threading-macros-alignment"><a class="anchor" href="#threading-macros-alignment"></a><a class="link" href="#threading-macros-alignment">Threading Macros Alignment</a></h3>
<div class="paragraph">
<p>The arguments to the threading macros <code>-&gt;</code> (thread-first) and <code>-&gt;&gt;</code>
(thread-last) should line up.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="nf">-&gt;&gt;</span><span class="w"> </span><span class="p">(</span><span class="nb">range</span><span class="p">)</span><span class="w">
     </span><span class="p">(</span><span class="nb">filter</span><span class="w"> </span><span class="n">even?</span><span class="p">)</span><span class="w">
     </span><span class="p">(</span><span class="nb">take</span><span class="w"> </span><span class="mi">5</span><span class="p">))</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="nf">-&gt;&gt;</span><span class="w"> </span><span class="p">(</span><span class="nb">range</span><span class="p">)</span><span class="w">
  </span><span class="p">(</span><span class="nb">filter</span><span class="w"> </span><span class="n">even?</span><span class="p">)</span><span class="w">
  </span><span class="p">(</span><span class="nb">take</span><span class="w"> </span><span class="mi">5</span><span class="p">))</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="else-keyword-in-cond"><a class="anchor" href="#else-keyword-in-cond"></a><a class="link" href="#else-keyword-in-cond">Default <code>cond</code> Branch</a></h3>
<div class="paragraph">
<p>Use <code>:else</code> as the catch-all test expression in <code>cond</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="k">cond</span><span class="w">
  </span><span class="p">(</span><span class="nb">neg?</span><span class="w"> </span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="s">"negative"</span><span class="w">
  </span><span class="p">(</span><span class="nb">pos?</span><span class="w"> </span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="s">"positive"</span><span class="w">
  </span><span class="no">:else</span><span class="w"> </span><span class="s">"zero"</span><span class="p">)</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="k">cond</span><span class="w">
  </span><span class="p">(</span><span class="nb">neg?</span><span class="w"> </span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="s">"negative"</span><span class="w">
  </span><span class="p">(</span><span class="nb">pos?</span><span class="w"> </span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="s">"positive"</span><span class="w">
  </span><span class="n">true</span><span class="w"> </span><span class="s">"zero"</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="condp"><a class="anchor" href="#condp"></a><a class="link" href="#condp"><code>condp</code> vs <code>cond</code></a></h3>
<div class="paragraph">
<p>Prefer <code>condp</code> instead of <code>cond</code> when the predicate &amp; expression don&#8217;t
change.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="k">cond</span><span class="w">
  </span><span class="p">(</span><span class="nb">=</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="no">:ten</span><span class="w">
  </span><span class="p">(</span><span class="nb">=</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="no">:twenty</span><span class="w">
  </span><span class="p">(</span><span class="nb">=</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="mi">30</span><span class="p">)</span><span class="w"> </span><span class="no">:thirty</span><span class="w">
  </span><span class="no">:else</span><span class="w"> </span><span class="no">:dunno</span><span class="p">)</span><span class="w">

</span><span class="c1">;; much better</span><span class="w">
</span><span class="p">(</span><span class="nf">condp</span><span class="w"> </span><span class="nb">=</span><span class="w"> </span><span class="n">x</span><span class="w">
  </span><span class="mi">10</span><span class="w"> </span><span class="no">:ten</span><span class="w">
  </span><span class="mi">20</span><span class="w"> </span><span class="no">:twenty</span><span class="w">
  </span><span class="mi">30</span><span class="w"> </span><span class="no">:thirty</span><span class="w">
  </span><span class="no">:dunno</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="case"><a class="anchor" href="#case"></a><a class="link" href="#case"><code>case</code> vs <code>cond/condp</code></a></h3>
<div class="paragraph">
<p>Prefer <code>case</code> instead of <code>cond</code> or <code>condp</code> when test expressions are
compile-time constants.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="k">cond</span><span class="w">
  </span><span class="p">(</span><span class="nb">=</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="no">:ten</span><span class="w">
  </span><span class="p">(</span><span class="nb">=</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="no">:twenty</span><span class="w">
  </span><span class="p">(</span><span class="nb">=</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="mi">30</span><span class="p">)</span><span class="w"> </span><span class="no">:forty</span><span class="w">
  </span><span class="no">:else</span><span class="w"> </span><span class="no">:dunno</span><span class="p">)</span><span class="w">

</span><span class="c1">;; better</span><span class="w">
</span><span class="p">(</span><span class="nf">condp</span><span class="w"> </span><span class="nb">=</span><span class="w"> </span><span class="n">x</span><span class="w">
  </span><span class="mi">10</span><span class="w"> </span><span class="no">:ten</span><span class="w">
  </span><span class="mi">20</span><span class="w"> </span><span class="no">:twenty</span><span class="w">
  </span><span class="mi">30</span><span class="w"> </span><span class="no">:forty</span><span class="w">
  </span><span class="no">:dunno</span><span class="p">)</span><span class="w">

</span><span class="c1">;; best</span><span class="w">
</span><span class="p">(</span><span class="nf">case</span><span class="w"> </span><span class="n">x</span><span class="w">
  </span><span class="mi">10</span><span class="w"> </span><span class="no">:ten</span><span class="w">
  </span><span class="mi">20</span><span class="w"> </span><span class="no">:twenty</span><span class="w">
  </span><span class="mi">30</span><span class="w"> </span><span class="no">:forty</span><span class="w">
  </span><span class="no">:dunno</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="short-forms-in-cond"><a class="anchor" href="#short-forms-in-cond"></a><a class="link" href="#short-forms-in-cond">Short Forms In Cond</a></h3>
<div class="paragraph">
<p>Use short forms in <code>cond</code> and related.  If not possible give visual
hints for the pairwise grouping with comments or empty lines.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="k">cond</span><span class="w">
  </span><span class="p">(</span><span class="nf">test1</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nf">action1</span><span class="p">)</span><span class="w">
  </span><span class="p">(</span><span class="nf">test2</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nf">action2</span><span class="p">)</span><span class="w">
  </span><span class="no">:else</span><span class="w">   </span><span class="p">(</span><span class="nf">default-action</span><span class="p">))</span><span class="w">

</span><span class="c1">;; ok-ish</span><span class="w">
</span><span class="p">(</span><span class="k">cond</span><span class="w">
  </span><span class="c1">;; test case 1</span><span class="w">
  </span><span class="p">(</span><span class="nf">test1</span><span class="p">)</span><span class="w">
  </span><span class="p">(</span><span class="nf">long-function-name-which-requires-a-new-line</span><span class="w">
    </span><span class="p">(</span><span class="nf">complicated-sub-form</span><span class="w">
      </span><span class="p">(</span><span class="nb">-&gt;</span><span class="w"> </span><span class="ss">'which-spans</span><span class="w"> </span><span class="n">multiple-lines</span><span class="p">)))</span><span class="w">

  </span><span class="c1">;; test case 2</span><span class="w">
  </span><span class="p">(</span><span class="nf">test2</span><span class="p">)</span><span class="w">
  </span><span class="p">(</span><span class="nf">another-very-long-function-name</span><span class="w">
    </span><span class="p">(</span><span class="nf">yet-another-sub-form</span><span class="w">
      </span><span class="p">(</span><span class="nb">-&gt;</span><span class="w"> </span><span class="ss">'which-spans</span><span class="w"> </span><span class="n">multiple-lines</span><span class="p">)))</span><span class="w">

  </span><span class="no">:else</span><span class="w">
  </span><span class="p">(</span><span class="nf">the-fall-through-default-case</span><span class="w">
    </span><span class="p">(</span><span class="nf">which-also-spans</span><span class="w"> </span><span class="ss">'multiple</span><span class="w">
                      </span><span class="ss">'lines</span><span class="p">)))</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="set-as-predicate"><a class="anchor" href="#set-as-predicate"></a><a class="link" href="#set-as-predicate">Set As Predicate</a></h3>
<div class="paragraph">
<p>Use a <code>set</code> as a predicate when appropriate.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="nb">remove</span><span class="w"> </span><span class="o">#</span><span class="p">{</span><span class="mi">1</span><span class="p">}</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="mi">5</span><span class="p">])</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="nb">remove</span><span class="w"> </span><span class="o">#</span><span class="p">(</span><span class="nb">=</span><span class="w"> </span><span class="n">%</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="mi">5</span><span class="p">])</span><span class="w">

</span><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="nb">count</span><span class="w"> </span><span class="p">(</span><span class="nb">filter</span><span class="w"> </span><span class="o">#</span><span class="p">{</span><span class="sc">\a</span><span class="w"> </span><span class="sc">\e</span><span class="w"> </span><span class="sc">\i</span><span class="w"> </span><span class="sc">\o</span><span class="w"> </span><span class="sc">\u</span><span class="p">}</span><span class="w"> </span><span class="s">"mary had a little lamb"</span><span class="p">))</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="nb">count</span><span class="w"> </span><span class="p">(</span><span class="nb">filter</span><span class="w"> </span><span class="o">#</span><span class="p">(</span><span class="nb">or</span><span class="w"> </span><span class="p">(</span><span class="nb">=</span><span class="w"> </span><span class="n">%</span><span class="w"> </span><span class="sc">\a</span><span class="p">)</span><span class="w">
                    </span><span class="p">(</span><span class="nb">=</span><span class="w"> </span><span class="n">%</span><span class="w"> </span><span class="sc">\e</span><span class="p">)</span><span class="w">
                    </span><span class="p">(</span><span class="nb">=</span><span class="w"> </span><span class="n">%</span><span class="w"> </span><span class="sc">\i</span><span class="p">)</span><span class="w">
                    </span><span class="p">(</span><span class="nb">=</span><span class="w"> </span><span class="n">%</span><span class="w"> </span><span class="sc">\o</span><span class="p">)</span><span class="w">
                    </span><span class="p">(</span><span class="nb">=</span><span class="w"> </span><span class="n">%</span><span class="w"> </span><span class="sc">\u</span><span class="p">))</span><span class="w">
               </span><span class="s">"mary had a little lamb"</span><span class="p">))</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="inc-and-dec"><a class="anchor" href="#inc-and-dec"></a><a class="link" href="#inc-and-dec"><code>inc</code> and <code>dec</code></a></h3>
<div class="paragraph">
<p>Use <code>(inc x)</code> &amp; <code>(dec x)</code> instead of <code>(+ x 1)</code> and <code>(- x 1)</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="pos-and-neg"><a class="anchor" href="#pos-and-neg"></a><a class="link" href="#pos-and-neg"><code>pos?</code> and <code>neg?</code></a></h3>
<div class="paragraph">
<p>Use <code>(pos? x)</code>, <code>(neg? x)</code> &amp; <code>(zero? x)</code> instead of <code>(&gt; x 0)</code>,
<code>(&lt; x 0)</code> &amp; <code>(= x 0)</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="list-star-instead-of-nested-cons"><a class="anchor" href="#list-star-instead-of-nested-cons"></a><a class="link" href="#list-star-instead-of-nested-cons"><code>list*</code> vs <code>cons</code></a></h3>
<div class="paragraph">
<p>Use <code>list*</code> instead of a series of nested <code>cons</code> invocations.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="nb">list*</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">[</span><span class="mi">4</span><span class="w"> </span><span class="mi">5</span><span class="p">])</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="nb">cons</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">(</span><span class="nb">cons</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">(</span><span class="nb">cons</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">[</span><span class="mi">4</span><span class="w"> </span><span class="mi">5</span><span class="p">])))</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="sugared-java-interop"><a class="anchor" href="#sugared-java-interop"></a><a class="link" href="#sugared-java-interop">Sugared Java Interop</a></h3>
<div class="paragraph">
<p>Use the sugared Java interop forms.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;;; object creation</span><span class="w">
</span><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="nf">java.util.ArrayList.</span><span class="w"> </span><span class="mi">100</span><span class="p">)</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="nb">new</span><span class="w"> </span><span class="n">java.util.ArrayList</span><span class="w"> </span><span class="mi">100</span><span class="p">)</span><span class="w">

</span><span class="c1">;;; static method invocation</span><span class="w">
</span><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="nf">Math/pow</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="nb">.</span><span class="w"> </span><span class="n">Math</span><span class="w"> </span><span class="n">pow</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span><span class="w">

</span><span class="c1">;;; instance method invocation</span><span class="w">
</span><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="nf">.substring</span><span class="w"> </span><span class="s">"hello"</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="nb">.</span><span class="w"> </span><span class="s">"hello"</span><span class="w"> </span><span class="n">substring</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span><span class="w">

</span><span class="c1">;;; static field access</span><span class="w">
</span><span class="c1">;; good</span><span class="w">
</span><span class="n">Integer/MAX_VALUE</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="nb">.</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">MAX_VALUE</span><span class="p">)</span><span class="w">

</span><span class="c1">;;; instance field access</span><span class="w">
</span><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="nf">.someField</span><span class="w"> </span><span class="n">some-object</span><span class="p">)</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="nb">.</span><span class="w"> </span><span class="n">some-object</span><span class="w"> </span><span class="n">someField</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="compact-metadata-notation-for-true-flags"><a class="anchor" href="#compact-metadata-notation-for-true-flags"></a><a class="link" href="#compact-metadata-notation-for-true-flags">Compact Metadata Notation For True Flags</a></h3>
<div class="paragraph">
<p>Use the compact metadata notation for metadata that contains only
slots whose keys are keywords and whose value is boolean <code>true</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="k">def</span><span class="w"> </span><span class="o">^</span><span class="no">:private</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="k">def</span><span class="w"> </span><span class="o">^</span><span class="p">{</span><span class="no">:private</span><span class="w"> </span><span class="n">true</span><span class="p">}</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="private"><a class="anchor" href="#private"></a><a class="link" href="#private">Private</a></h3>
<div class="paragraph">
<p>Denote private parts of your code.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="k">defn-</span><span class="w"> </span><span class="n">private-fun</span><span class="w"> </span><span class="p">[]</span><span class="w"> </span><span class="n">...</span><span class="p">)</span><span class="w">

</span><span class="p">(</span><span class="k">def</span><span class="w"> </span><span class="o">^</span><span class="no">:private</span><span class="w"> </span><span class="n">private-var</span><span class="w"> </span><span class="n">...</span><span class="p">)</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">private-fun</span><span class="w"> </span><span class="p">[]</span><span class="w"> </span><span class="n">...</span><span class="p">)</span><span class="w"> </span><span class="c1">; not private at all</span><span class="w">

</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="o">^</span><span class="no">:private</span><span class="w"> </span><span class="n">private-fun</span><span class="w"> </span><span class="p">[]</span><span class="w"> </span><span class="n">...</span><span class="p">)</span><span class="w"> </span><span class="c1">; overly verbose</span><span class="w">

</span><span class="p">(</span><span class="k">def</span><span class="w"> </span><span class="n">private-var</span><span class="w"> </span><span class="n">...</span><span class="p">)</span><span class="w"> </span><span class="c1">; not private at all</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="access-private-var"><a class="anchor" href="#access-private-var"></a><a class="link" href="#access-private-var">Access Private Var</a></h3>
<div class="paragraph">
<p>To access a private var (e.g. for testing), use the <code>@#'some.ns/var</code> form.</p>
</div>
</div>
<div class="sect2">
<h3 id="attach-metadata-carefully"><a class="anchor" href="#attach-metadata-carefully"></a><a class="link" href="#attach-metadata-carefully">Attach Metadata Carefully</a></h3>
<div class="paragraph">
<p>Be careful regarding what exactly you attach metadata to.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; we attach the metadata to the var referenced by `a`</span><span class="w">
</span><span class="p">(</span><span class="k">def</span><span class="w"> </span><span class="o">^</span><span class="no">:private</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">{})</span><span class="w">
</span><span class="p">(</span><span class="nb">meta</span><span class="w"> </span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="c1">;=&gt; nil</span><span class="w">
</span><span class="p">(</span><span class="nb">meta</span><span class="w"> </span><span class="o">#</span><span class="ss">'a</span><span class="p">)</span><span class="w"> </span><span class="c1">;=&gt; {:private true}</span><span class="w">

</span><span class="c1">;; we attach the metadata to the empty hash-map value</span><span class="w">
</span><span class="p">(</span><span class="k">def</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">^</span><span class="no">:private</span><span class="w"> </span><span class="p">{})</span><span class="w">
</span><span class="p">(</span><span class="nb">meta</span><span class="w"> </span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="c1">;=&gt; {:private true}</span><span class="w">
</span><span class="p">(</span><span class="nb">meta</span><span class="w"> </span><span class="o">#</span><span class="ss">'a</span><span class="p">)</span><span class="w"> </span><span class="c1">;=&gt; nil</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="naming"><a class="anchor" href="#naming"></a><a class="link" href="#naming">Naming</a></h2>
<div class="sectionbody">
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>The only real difficulties in programming are cache invalidation and
naming things.</p>
</div>
</blockquote>
<div class="attribution">
&#8212; Phil Karlton
</div>
</div>
<div class="sect2">
<h3 id="naming-ns-naming-schemas"><a class="anchor" href="#naming-ns-naming-schemas"></a><a class="link" href="#naming-ns-naming-schemas">Namespace Naming Schemas</a></h3>
<div class="paragraph">
<p>When naming namespaces favor the following two schemas:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>project.module</code></p>
</li>
<li>
<p><code>organization.project.module</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="naming-namespace-composite-segments"><a class="anchor" href="#naming-namespace-composite-segments"></a><a class="link" href="#naming-namespace-composite-segments">Composite Word Namespace Segments</a></h3>
<div class="paragraph">
<p>Use <code>lisp-case</code> in composite namespace segments (e.g. <code>bruce.project-euler</code>).</p>
</div>
</div>
<div class="sect2">
<h3 id="naming-functions-and-variables"><a class="anchor" href="#naming-functions-and-variables"></a><a class="link" href="#naming-functions-and-variables">Functions and Variables</a></h3>
<div class="paragraph">
<p>Use <code>lisp-case</code> for function and variable names.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Many non-Lisp programming communities refer to <code>lisp-case</code> as
<code>kebab-case</code>, but we all know that Lisp has existed way before kebab
was invented.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="k">def</span><span class="w"> </span><span class="n">some-var</span><span class="w"> </span><span class="n">...</span><span class="p">)</span><span class="w">
</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">some-fun</span><span class="w"> </span><span class="n">...</span><span class="p">)</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="k">def</span><span class="w"> </span><span class="n">someVar</span><span class="w"> </span><span class="n">...</span><span class="p">)</span><span class="w">
</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">somefun</span><span class="w"> </span><span class="n">...</span><span class="p">)</span><span class="w">
</span><span class="p">(</span><span class="k">def</span><span class="w"> </span><span class="n">some_fun</span><span class="w"> </span><span class="n">...</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="naming-protocols-records-structs-and-types"><a class="anchor" href="#naming-protocols-records-structs-and-types"></a><a class="link" href="#naming-protocols-records-structs-and-types">Protocols, Records, Structs And Types</a></h3>
<div class="paragraph">
<p>Use <code>CapitalCase</code> for protocols, records, structs, and types. (Keep
acronyms like HTTP, RFC, XML uppercase.)</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<code>CapitalCase</code> is also known as <code>UpperCamelCase, `CapitalWords</code>
and <code>PascalCase</code>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="naming-predicates"><a class="anchor" href="#naming-predicates"></a><a class="link" href="#naming-predicates">Predicate Methods</a></h3>
<div class="paragraph">
<p>The names of predicate methods (methods that return a boolean value)
should end in a question mark
(e.g., <code>even?</code>).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">palindrome?</span><span class="w"> </span><span class="n">...</span><span class="p">)</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">palindrome-p</span><span class="w"> </span><span class="n">...</span><span class="p">)</span><span class="w"> </span><span class="c1">; Common Lisp style</span><span class="w">
</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">is-palindrome</span><span class="w"> </span><span class="n">...</span><span class="p">)</span><span class="w"> </span><span class="c1">; Java style</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="naming-unsafe-functions"><a class="anchor" href="#naming-unsafe-functions"></a><a class="link" href="#naming-unsafe-functions">Unsafe Functions</a></h3>
<div class="paragraph">
<p>The names of functions/macros that are not safe in STM transactions
should end with an exclamation mark (e.g. <code>reset!</code>).</p>
</div>
</div>
<div class="sect2">
<h3 id="naming-conversion-functions"><a class="anchor" href="#naming-conversion-functions"></a><a class="link" href="#naming-conversion-functions">Conversion Functions</a></h3>
<div class="paragraph">
<p>Use <code>-&gt;</code> instead of <code>to</code> in the names of conversion functions.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">f-&gt;c</span><span class="w"> </span><span class="n">...</span><span class="p">)</span><span class="w">

</span><span class="c1">;; not so good</span><span class="w">
</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">f-to-c</span><span class="w"> </span><span class="n">...</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="naming-dynamic-vars"><a class="anchor" href="#naming-dynamic-vars"></a><a class="link" href="#naming-dynamic-vars">Dynamic Vars</a></h3>
<div class="paragraph">
<p>Use <code><strong>earmuffs</strong></code> for things intended for rebinding (ie. are dynamic).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="k">def</span><span class="w"> </span><span class="o">^</span><span class="no">:dynamic</span><span class="w"> </span><span class="n">*a*</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="k">def</span><span class="w"> </span><span class="o">^</span><span class="no">:dynamic</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="naming-constants"><a class="anchor" href="#naming-constants"></a><a class="link" href="#naming-constants">Constants</a></h3>
<div class="paragraph">
<p>Don&#8217;t use a special notation for constants; everything is assumed a constant
unless specified otherwise.</p>
</div>
</div>
<div class="sect2">
<h3 id="naming-unused-bindings"><a class="anchor" href="#naming-unused-bindings"></a><a class="link" href="#naming-unused-bindings">Unused Bindings</a></h3>
<div class="paragraph">
<p>Use <code>_</code> for destructuring targets and formal argument names whose
value will be ignored by the code at hand.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="k">let</span><span class="w"> </span><span class="p">[[</span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="n">c</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">4</span><span class="p">]]</span><span class="w">
  </span><span class="p">(</span><span class="nb">println</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="n">c</span><span class="p">))</span><span class="w">

</span><span class="p">(</span><span class="nb">dotimes</span><span class="w"> </span><span class="p">[</span><span class="n">_</span><span class="w"> </span><span class="mi">3</span><span class="p">]</span><span class="w">
  </span><span class="p">(</span><span class="nb">println</span><span class="w"> </span><span class="s">"Hello!"</span><span class="p">))</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="k">let</span><span class="w"> </span><span class="p">[[</span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="n">d</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">4</span><span class="p">]]</span><span class="w">
  </span><span class="p">(</span><span class="nb">println</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="n">d</span><span class="p">))</span><span class="w">

</span><span class="p">(</span><span class="nb">dotimes</span><span class="w"> </span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="mi">3</span><span class="p">]</span><span class="w">
  </span><span class="p">(</span><span class="nb">println</span><span class="w"> </span><span class="s">"Hello!"</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>However, when it can help the understanding of your code, it can be useful to explicitly name unused arguments or maps you&#8217;re destructuring from. In this case, prepend the name with an underscore to explicitly signal that the variable is supposed to be unused.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">myfun1</span><span class="w"> </span><span class="p">[</span><span class="n">context</span><span class="w"> </span><span class="n">_</span><span class="p">]</span><span class="w">
 </span><span class="p">(</span><span class="nb">assoc</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="no">:foo</span><span class="w"> </span><span class="s">"bar"</span><span class="p">))</span><span class="w">

</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">myfun2</span><span class="w"> </span><span class="p">[</span><span class="n">context</span><span class="w"> </span><span class="p">{</span><span class="no">:keys</span><span class="w"> </span><span class="p">[</span><span class="n">id</span><span class="p">]}]</span><span class="w">
 </span><span class="p">(</span><span class="nb">assoc</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="no">:user-id</span><span class="w"> </span><span class="n">id</span><span class="p">))</span><span class="w">

</span><span class="c1">;; better</span><span class="w">
</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">myfun1</span><span class="w"> </span><span class="p">[</span><span class="n">context</span><span class="w"> </span><span class="n">_user</span><span class="p">]</span><span class="w">
 </span><span class="p">(</span><span class="nb">assoc</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="no">:foo</span><span class="w"> </span><span class="s">"bar"</span><span class="p">))</span><span class="w">

</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">myfun2</span><span class="w"> </span><span class="p">[</span><span class="n">context</span><span class="w"> </span><span class="p">{</span><span class="no">:keys</span><span class="w"> </span><span class="p">[</span><span class="n">id</span><span class="p">]</span><span class="w"> </span><span class="no">:as</span><span class="w"> </span><span class="n">_user</span><span class="p">}]</span><span class="w">
 </span><span class="p">(</span><span class="nb">assoc</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="no">:user-id</span><span class="w"> </span><span class="n">id</span><span class="p">))</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="idiomatic-names"><a class="anchor" href="#idiomatic-names"></a><a class="link" href="#idiomatic-names">Idiomatic Names</a></h3>
<div class="paragraph">
<p>Follow <code>clojure.core</code>'s example for idiomatic names like <code>pred</code> and <code>coll</code>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>in functions:</p>
<div class="ulist">
<ul>
<li>
<p><code>f</code>, <code>g</code>, <code>h</code> - function input</p>
</li>
<li>
<p><code>n</code> - integer input usually a size</p>
</li>
<li>
<p><code>index</code>, <code>i</code> - integer index</p>
</li>
<li>
<p><code>x</code>, <code>y</code> - numbers</p>
</li>
<li>
<p><code>xs</code> - sequence</p>
</li>
<li>
<p><code>m</code> - map</p>
</li>
<li>
<p><code>s</code> - string input</p>
</li>
<li>
<p><code>re</code> - regular expression</p>
</li>
<li>
<p><code>coll</code> - a collection</p>
</li>
<li>
<p><code>pred</code> - a predicate closure</p>
</li>
<li>
<p><code>&amp; more</code> - variadic input</p>
</li>
<li>
<p><code>xf</code> - xform, a transducer</p>
</li>
</ul>
</div>
</li>
<li>
<p>in macros:</p>
<div class="ulist">
<ul>
<li>
<p><code>expr</code> - an expression</p>
</li>
<li>
<p><code>body</code> - a macro body</p>
</li>
<li>
<p><code>binding</code> - a macro binding vector</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="data-structures"><a class="anchor" href="#data-structures"></a><a class="link" href="#data-structures">Data Structures</a></h2>
<div class="sectionbody">
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>It is better to have 100 functions operate on one data structure
than to have 10 functions operate on 10 data structures.</p>
</div>
</blockquote>
<div class="attribution">
&#8212; Alan J. Perlis
</div>
</div>
<div class="sect2">
<h3 id="avoid-lists"><a class="anchor" href="#avoid-lists"></a><a class="link" href="#avoid-lists">Avoid Lists</a></h3>
<div class="paragraph">
<p>Avoid the use of lists for generic data storage (unless a list is
exactly what you need).</p>
</div>
</div>
<div class="sect2">
<h3 id="keywords-for-hash-keys"><a class="anchor" href="#keywords-for-hash-keys"></a><a class="link" href="#keywords-for-hash-keys">Keywords For Hash Keys</a></h3>
<div class="paragraph">
<p>Prefer the use of keywords for hash keys.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">{</span><span class="no">:name</span><span class="w"> </span><span class="s">"Bruce"</span><span class="w"> </span><span class="no">:age</span><span class="w"> </span><span class="mi">30</span><span class="p">}</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">{</span><span class="s">"name"</span><span class="w"> </span><span class="s">"Bruce"</span><span class="w"> </span><span class="s">"age"</span><span class="w"> </span><span class="mi">30</span><span class="p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="literal-col-syntax"><a class="anchor" href="#literal-col-syntax"></a><a class="link" href="#literal-col-syntax">Literal Col Syntax</a></h3>
<div class="paragraph">
<p>Prefer the use of the literal collection syntax where
applicable. However, when defining sets, only use literal syntax
when the values are compile-time constants.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">[</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">]</span><span class="w">
</span><span class="o">#</span><span class="p">{</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">}</span><span class="w">
</span><span class="p">(</span><span class="nb">hash-set</span><span class="w"> </span><span class="p">(</span><span class="nf">func1</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nf">func2</span><span class="p">))</span><span class="w"> </span><span class="c1">; values determined at runtime</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="nb">vector</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span><span class="w">
</span><span class="p">(</span><span class="nb">hash-set</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span><span class="w">
</span><span class="o">#</span><span class="p">{(</span><span class="nf">func1</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nf">func2</span><span class="p">)}</span><span class="w"> </span><span class="c1">; will throw runtime exception if (func1) = (func2)</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="avoid-index-based-coll-access"><a class="anchor" href="#avoid-index-based-coll-access"></a><a class="link" href="#avoid-index-based-coll-access">Avoid Index Based Coll Access</a></h3>
<div class="paragraph">
<p>Avoid accessing collection members by index whenever possible.</p>
</div>
</div>
<div class="sect2">
<h3 id="keywords-as-fn-to-get-map-values"><a class="anchor" href="#keywords-as-fn-to-get-map-values"></a><a class="link" href="#keywords-as-fn-to-get-map-values">Keywords As Fn To Get Map Values</a></h3>
<div class="paragraph">
<p>Prefer the use of keywords as functions for retrieving values from
maps, where applicable.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="p">(</span><span class="k">def</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="p">{</span><span class="no">:name</span><span class="w"> </span><span class="s">"Bruce"</span><span class="w"> </span><span class="no">:age</span><span class="w"> </span><span class="mi">30</span><span class="p">})</span><span class="w">

</span><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="no">:name</span><span class="w"> </span><span class="n">m</span><span class="p">)</span><span class="w">

</span><span class="c1">;; more verbose than necessary</span><span class="w">
</span><span class="p">(</span><span class="nb">get</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="no">:name</span><span class="p">)</span><span class="w">

</span><span class="c1">;; bad - susceptible to NullPointerException</span><span class="w">
</span><span class="p">(</span><span class="nf">m</span><span class="w"> </span><span class="no">:name</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="colls-as-fns"><a class="anchor" href="#colls-as-fns"></a><a class="link" href="#colls-as-fns">Colls As Fns</a></h3>
<div class="paragraph">
<p>Leverage the fact that most collections are functions of their elements.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="nb">filter</span><span class="w"> </span><span class="o">#</span><span class="p">{</span><span class="sc">\a</span><span class="w"> </span><span class="sc">\e</span><span class="w"> </span><span class="sc">\o</span><span class="w"> </span><span class="sc">\i</span><span class="w"> </span><span class="sc">\u</span><span class="p">}</span><span class="w"> </span><span class="s">"this is a test"</span><span class="p">)</span><span class="w">

</span><span class="c1">;; bad - too ugly to share</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="keywords-as-fns"><a class="anchor" href="#keywords-as-fns"></a><a class="link" href="#keywords-as-fns">Keywords As Fns</a></h3>
<div class="paragraph">
<p>Leverage the fact that keywords can be used as functions of a collection.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="p">((</span><span class="nf">juxt</span><span class="w"> </span><span class="no">:a</span><span class="w"> </span><span class="no">:b</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="no">:a</span><span class="w"> </span><span class="s">"ala"</span><span class="w"> </span><span class="no">:b</span><span class="w"> </span><span class="s">"bala"</span><span class="p">})</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="avoid-transient-colls"><a class="anchor" href="#avoid-transient-colls"></a><a class="link" href="#avoid-transient-colls">Avoid Transient Colls</a></h3>
<div class="paragraph">
<p>Avoid the use of transient collections, except for
performance-critical portions of the code.</p>
</div>
</div>
<div class="sect2">
<h3 id="avoid-java-colls"><a class="anchor" href="#avoid-java-colls"></a><a class="link" href="#avoid-java-colls">Avoid Java Colls</a></h3>
<div class="paragraph">
<p>Avoid the use of Java collections.</p>
</div>
</div>
<div class="sect2">
<h3 id="avoid-java-arrays"><a class="anchor" href="#avoid-java-arrays"></a><a class="link" href="#avoid-java-arrays">Avoid Java Arrays</a></h3>
<div class="paragraph">
<p>Avoid the use of Java arrays, except for interop scenarios and
performance-critical code dealing heavily with primitive types.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="types-records"><a class="anchor" href="#types-records"></a><a class="link" href="#types-records">Types &amp; Records</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="record-constructors"><a class="anchor" href="#record-constructors"></a><a class="link" href="#record-constructors">Record Constructors</a></h3>
<div class="paragraph">
<p>Don&#8217;t use the interop syntax to
construct type and record instances.  <code>deftype</code> and <code>defrecord</code>
automatically create constructor functions. Use those instead of
the interop syntax, as they make it clear that you&#8217;re dealing with a
<code>deftype</code> or a <code>defrecord</code>. See <a href="https://stuartsierra.com/2015/05/17/clojure-record-constructors">this
article</a>
for more details.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="p">(</span><span class="nf">defrecord</span><span class="w"> </span><span class="n">Foo</span><span class="w"> </span><span class="p">[</span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="p">])</span><span class="w">
</span><span class="p">(</span><span class="nf">deftype</span><span class="w"> </span><span class="n">Bar</span><span class="w"> </span><span class="p">[</span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="p">])</span><span class="w">

</span><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="nf">-&gt;Foo</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w">
</span><span class="p">(</span><span class="nf">map-&gt;Foo</span><span class="w"> </span><span class="p">{</span><span class="no">:b</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="no">:a</span><span class="w"> </span><span class="mi">3</span><span class="p">})</span><span class="w">
</span><span class="p">(</span><span class="nf">-&gt;Bar</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="nf">Foo.</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w">
</span><span class="p">(</span><span class="nf">Bar.</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that <code>deftype</code> doesn&#8217;t define the <code>map-&gt;Type</code>
  constructor. It&#8217;s available only for records.</p>
</div>
</div>
<div class="sect2">
<h3 id="custom-record-constructors"><a class="anchor" href="#custom-record-constructors"></a><a class="link" href="#custom-record-constructors">Custom Record Constructors</a></h3>
<div class="paragraph">
<p>Add custom type/record constructors when needed (e.g. to validate
properties on record creation). See <a href="https://stuartsierra.com/2015/05/17/clojure-record-constructors">this
article</a>
for more details.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="p">(</span><span class="nf">defrecord</span><span class="w"> </span><span class="n">Customer</span><span class="w"> </span><span class="p">[</span><span class="n">id</span><span class="w"> </span><span class="nb">name</span><span class="w"> </span><span class="n">phone</span><span class="w"> </span><span class="n">email</span><span class="p">])</span><span class="w">

</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">make-customer</span><span class="w">
  </span><span class="s">"Creates a new customer record."</span><span class="w">
  </span><span class="p">[{</span><span class="no">:keys</span><span class="w"> </span><span class="p">[</span><span class="nb">name</span><span class="w"> </span><span class="n">phone</span><span class="w"> </span><span class="n">email</span><span class="p">]}]</span><span class="w">
  </span><span class="p">{</span><span class="no">:pre</span><span class="w"> </span><span class="p">[(</span><span class="nb">string?</span><span class="w"> </span><span class="nb">name</span><span class="p">)</span><span class="w">
         </span><span class="p">(</span><span class="nf">valid-phone?</span><span class="w"> </span><span class="n">phone</span><span class="p">)</span><span class="w">
         </span><span class="p">(</span><span class="nf">valid-email?</span><span class="w"> </span><span class="n">email</span><span class="p">)]}</span><span class="w">
  </span><span class="p">(</span><span class="nf">-&gt;Customer</span><span class="w"> </span><span class="p">(</span><span class="nf">next-id</span><span class="p">)</span><span class="w"> </span><span class="nb">name</span><span class="w"> </span><span class="n">phone</span><span class="w"> </span><span class="n">email</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Feel free to adopt whatever naming convention or structure you&#8217;d like for such custom constructors.</p>
</div>
</div>
<div class="sect2">
<h3 id="custom-record-constructors-naming"><a class="anchor" href="#custom-record-constructors-naming"></a><a class="link" href="#custom-record-constructors-naming">Custom Record Constructors Naming</a></h3>
<div class="paragraph">
<p>Don&#8217;t override the auto-generated type/record constructor functions.
People expect them to have a certain behaviour and changing this behaviour
violates the principle of least surprise. See <a href="https://stuartsierra.com/2015/05/17/clojure-record-constructors">this
article</a>
for more details.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="p">(</span><span class="nf">defrecord</span><span class="w"> </span><span class="n">Foo</span><span class="w"> </span><span class="p">[</span><span class="n">num</span><span class="p">])</span><span class="w">

</span><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">make-foo</span><span class="w">
  </span><span class="p">[</span><span class="n">num</span><span class="p">]</span><span class="w">
  </span><span class="p">{</span><span class="no">:pre</span><span class="w"> </span><span class="p">[(</span><span class="nb">pos?</span><span class="w"> </span><span class="n">num</span><span class="p">)]}</span><span class="w">
  </span><span class="p">(</span><span class="nf">-&gt;Foo</span><span class="w"> </span><span class="n">num</span><span class="p">))</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">-&gt;Foo</span><span class="w">
  </span><span class="p">[</span><span class="n">num</span><span class="p">]</span><span class="w">
  </span><span class="p">{</span><span class="no">:pre</span><span class="w"> </span><span class="p">[(</span><span class="nb">pos?</span><span class="w"> </span><span class="n">num</span><span class="p">)]}</span><span class="w">
  </span><span class="p">(</span><span class="nf">Foo.</span><span class="w"> </span><span class="n">num</span><span class="p">))</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="mutation"><a class="anchor" href="#mutation"></a><a class="link" href="#mutation">Mutation</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="Refs"><a class="anchor" href="#Refs"></a><a class="link" href="#Refs">Refs</a></h3>
<div class="sect3">
<h4 id="refs-io-macro"><a class="anchor" href="#refs-io-macro"></a><a class="link" href="#refs-io-macro"><code>io!</code> Macro</a></h4>
<div class="paragraph">
<p>Consider wrapping all I/O calls with the <code>io!</code> macro to avoid nasty
surprises if you accidentally end up calling such code in a
transaction.</p>
</div>
</div>
<div class="sect3">
<h4 id="refs-avoid-ref-set"><a class="anchor" href="#refs-avoid-ref-set"></a><a class="link" href="#refs-avoid-ref-set">Avoid <code>ref-set</code></a></h4>
<div class="paragraph">
<p>Avoid the use of <code>ref-set</code> whenever possible.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="p">(</span><span class="k">def</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="p">(</span><span class="nb">ref</span><span class="w"> </span><span class="mi">0</span><span class="p">))</span><span class="w">

</span><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="nb">dosync</span><span class="w"> </span><span class="p">(</span><span class="nb">alter</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="nb">+</span><span class="w"> </span><span class="mi">5</span><span class="p">))</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="nb">dosync</span><span class="w"> </span><span class="p">(</span><span class="nb">ref-set</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="mi">5</span><span class="p">))</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="refs-small-transactions"><a class="anchor" href="#refs-small-transactions"></a><a class="link" href="#refs-small-transactions">Small Transactions</a></h4>
<div class="paragraph">
<p>Try to keep the size of transactions (the amount of work encapsulated in them)
as small as possible.</p>
</div>
</div>
<div class="sect3">
<h4 id="refs-avoid-short-long-transactions-with-same-ref"><a class="anchor" href="#refs-avoid-short-long-transactions-with-same-ref"></a><a class="link" href="#refs-avoid-short-long-transactions-with-same-ref">Avoid Short Long Transactions With Same Ref</a></h4>
<div class="paragraph">
<p>Avoid having both short- and long-running transactions interacting
with the same Ref.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Agents"><a class="anchor" href="#Agents"></a><a class="link" href="#Agents">Agents</a></h3>
<div class="sect3">
<h4 id="agents-send"><a class="anchor" href="#agents-send"></a><a class="link" href="#agents-send">Agents Send</a></h4>
<div class="paragraph">
<p>Use <code>send</code> only for actions that are CPU bound and don&#8217;t block on I/O
or other threads.</p>
</div>
</div>
<div class="sect3">
<h4 id="agents-send-off"><a class="anchor" href="#agents-send-off"></a><a class="link" href="#agents-send-off">Agents Send Off</a></h4>
<div class="paragraph">
<p>Use <code>send-off</code> for actions that might block, sleep, or otherwise tie
up the thread.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Atoms"><a class="anchor" href="#Atoms"></a><a class="link" href="#Atoms">Atoms</a></h3>
<div class="sect3">
<h4 id="atoms-no-update-within-transactions"><a class="anchor" href="#atoms-no-update-within-transactions"></a><a class="link" href="#atoms-no-update-within-transactions">No Updates Within Transactions</a></h4>
<div class="paragraph">
<p>Avoid atom updates inside STM transactions.</p>
</div>
</div>
<div class="sect3">
<h4 id="atoms-prefer-swap-over-reset"><a class="anchor" href="#atoms-prefer-swap-over-reset"></a><a class="link" href="#atoms-prefer-swap-over-reset">Prefer <code>swap!</code> over <code>reset!</code></a></h4>
<div class="paragraph">
<p>Try to use <code>swap!</code> rather than <code>reset!</code>, where possible.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="p">(</span><span class="k">def</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">(</span><span class="nf">atom</span><span class="w"> </span><span class="mi">0</span><span class="p">))</span><span class="w">

</span><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="nf">swap!</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="nb">+</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span><span class="w">

</span><span class="c1">;; not as good</span><span class="w">
</span><span class="p">(</span><span class="nf">reset!</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="strings"><a class="anchor" href="#strings"></a><a class="link" href="#strings">Strings</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="prefer-clojure-string-over-interop"><a class="anchor" href="#prefer-clojure-string-over-interop"></a><a class="link" href="#prefer-clojure-string-over-interop">Prefer Clojure String Over Interop</a></h3>
<div class="paragraph">
<p>Prefer string manipulation functions from <code>clojure.string</code> over Java interop or rolling your own.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="nf">clojure.string/upper-case</span><span class="w"> </span><span class="s">"bruce"</span><span class="p">)</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="nf">.toUpperCase</span><span class="w"> </span><span class="s">"bruce"</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exceptions"><a class="anchor" href="#exceptions"></a><a class="link" href="#exceptions">Exceptions</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="reuse-existing-exception-types"><a class="anchor" href="#reuse-existing-exception-types"></a><a class="link" href="#reuse-existing-exception-types">Reuse Existing Exception Types</a></h3>
<div class="paragraph">
<p>Reuse existing exception types. Idiomatic Clojure code&#8201;&#8212;&#8201;when it does
throw an exception&#8201;&#8212;&#8201;throws an exception of a standard type
(e.g. <code>java.lang.IllegalArgumentException</code>,
<code>java.lang.UnsupportedOperationException</code>,
<code>java.lang.IllegalStateException</code>, <code>java.io.IOException</code>).</p>
</div>
</div>
<div class="sect2">
<h3 id="prefer-with-open-over-finally"><a class="anchor" href="#prefer-with-open-over-finally"></a><a class="link" href="#prefer-with-open-over-finally">Prefer <code>with-open</code> Over <code>finally</code></a></h3>
<div class="paragraph">
<p>Favor <code>with-open</code> over <code>finally</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="macros"><a class="anchor" href="#macros"></a><a class="link" href="#macros">Macros</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="dont-write-macro-if-fn-will-do"><a class="anchor" href="#dont-write-macro-if-fn-will-do"></a><a class="link" href="#dont-write-macro-if-fn-will-do">Don&#8217;t Write Macro If Fn Will Do</a></h3>
<div class="paragraph">
<p>Don&#8217;t write a macro if a function will do.</p>
</div>
</div>
<div class="sect2">
<h3 id="write-macro-usage-before-writing-the-macro"><a class="anchor" href="#write-macro-usage-before-writing-the-macro"></a><a class="link" href="#write-macro-usage-before-writing-the-macro">Write Macro Usage Before Writing The Macro</a></h3>
<div class="paragraph">
<p>Create an example of a macro usage first and the macro afterwards.</p>
</div>
</div>
<div class="sect2">
<h3 id="break-complicated-macros"><a class="anchor" href="#break-complicated-macros"></a><a class="link" href="#break-complicated-macros">Break Complicated Macros</a></h3>
<div class="paragraph">
<p>Break complicated macros into smaller functions whenever possible.</p>
</div>
</div>
<div class="sect2">
<h3 id="macros-as-syntactic-sugar"><a class="anchor" href="#macros-as-syntactic-sugar"></a><a class="link" href="#macros-as-syntactic-sugar">Macros As Syntactic Sugar</a></h3>
<div class="paragraph">
<p>A macro should usually just provide syntactic sugar and the core of
the macro should be a plain function. Doing so will improve
composability.</p>
</div>
</div>
<div class="sect2">
<h3 id="syntax-quoted-forms"><a class="anchor" href="#syntax-quoted-forms"></a><a class="link" href="#syntax-quoted-forms">Syntax Quoted Forms</a></h3>
<div class="paragraph">
<p>Prefer syntax-quoted forms over building lists manually.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="comments"><a class="anchor" href="#comments"></a><a class="link" href="#comments">Comments</a></h2>
<div class="sectionbody">
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Good code is its own best documentation. As you&#8217;re about to add a
comment, ask yourself, "How can I improve the code so that this
comment isn&#8217;t needed?" Improve the code and then document it to make
it even clearer.</p>
</div>
</blockquote>
<div class="attribution">
&#8212; Steve McConnell
</div>
</div>
<div class="sect2">
<h3 id="self-documenting-code"><a class="anchor" href="#self-documenting-code"></a><a class="link" href="#self-documenting-code">Self Documenting Code</a></h3>
<div class="paragraph">
<p>Endeavor to make your code as self-documenting as possible.</p>
</div>
</div>
<div class="sect2">
<h3 id="four-semicolons-for-heading-comments"><a class="anchor" href="#four-semicolons-for-heading-comments"></a><a class="link" href="#four-semicolons-for-heading-comments">Four Semicolons For Heading Comments</a></h3>
<div class="paragraph">
<p>Write heading comments with at least four semicolons.</p>
</div>
</div>
<div class="sect2">
<h3 id="three-semicolons-for-top-level-comments"><a class="anchor" href="#three-semicolons-for-top-level-comments"></a><a class="link" href="#three-semicolons-for-top-level-comments">Three Semicolons For Top Level Comments</a></h3>
<div class="paragraph">
<p>Write top-level comments with three semicolons.</p>
</div>
</div>
<div class="sect2">
<h3 id="two-semicolons-for-code-fragment"><a class="anchor" href="#two-semicolons-for-code-fragment"></a><a class="link" href="#two-semicolons-for-code-fragment">Two Semicolons For Code Fragment</a></h3>
<div class="paragraph">
<p>Write comments on a particular fragment of code before that fragment
and aligned with it, using two semicolons.</p>
</div>
</div>
<div class="sect2">
<h3 id="one-semicolon-for-margin-comments"><a class="anchor" href="#one-semicolon-for-margin-comments"></a><a class="link" href="#one-semicolon-for-margin-comments">One Semicolon For Margin Comments</a></h3>
<div class="paragraph">
<p>Write margin comments with one semicolon.</p>
</div>
</div>
<div class="sect2">
<h3 id="semicolon-space"><a class="anchor" href="#semicolon-space"></a><a class="link" href="#semicolon-space">Semicolon Space</a></h3>
<div class="paragraph">
<p>Always have at least one space between the semicolon
and the text that follows it.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;;;; Frob Grovel</span><span class="w">

</span><span class="c1">;;; This section of code has some important implications:</span><span class="w">
</span><span class="c1">;;;   1. Foo.</span><span class="w">
</span><span class="c1">;;;   2. Bar.</span><span class="w">
</span><span class="c1">;;;   3. Baz.</span><span class="w">

</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">fnord</span><span class="w"> </span><span class="p">[</span><span class="n">zarquon</span><span class="p">]</span><span class="w">
  </span><span class="c1">;; If zob, then veeblefitz.</span><span class="w">
  </span><span class="p">(</span><span class="nf">quux</span><span class="w"> </span><span class="n">zot</span><span class="w">
        </span><span class="n">mumble</span><span class="w">             </span><span class="c1">; Zibblefrotz.</span><span class="w">
        </span><span class="n">frotz</span><span class="p">))</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="english-syntax"><a class="anchor" href="#english-syntax"></a><a class="link" href="#english-syntax">English Syntax</a></h3>
<div class="paragraph">
<p>Comments longer than a word begin with a capital letter and use
punctuation. Separate sentences with
<a href="https://en.wikipedia.org/wiki/Sentence_spacing">one space</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="no-superfluous-comments"><a class="anchor" href="#no-superfluous-comments"></a><a class="link" href="#no-superfluous-comments">No Superfluous Comments</a></h3>
<div class="paragraph">
<p>Avoid superfluous comments.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="nb">inc</span><span class="w"> </span><span class="n">counter</span><span class="p">)</span><span class="w"> </span><span class="c1">; increments counter by one</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="comment-upkeep"><a class="anchor" href="#comment-upkeep"></a><a class="link" href="#comment-upkeep">Comment Upkeep</a></h3>
<div class="paragraph">
<p>Keep existing comments up-to-date. An outdated comment is worse than no comment
at all.</p>
</div>
</div>
<div class="sect2">
<h3 id="dash-underscore-reader-macro"><a class="anchor" href="#dash-underscore-reader-macro"></a><a class="link" href="#dash-underscore-reader-macro">Dash Underscore Reader Macro</a></h3>
<div class="paragraph">
<p>Prefer the use of the <code>#_</code> reader macro over a regular comment when
you need to comment out a particular form.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="nb">+</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="o">#</span><span class="n">_</span><span class="p">(</span><span class="nf">bar</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="n">delta</span><span class="p">)</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="nb">+</span><span class="w"> </span><span class="n">foo</span><span class="w">
   </span><span class="c1">;; (bar x)</span><span class="w">
   </span><span class="n">delta</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="refactor-dont-comment"><a class="anchor" href="#refactor-dont-comment"></a><a class="link" href="#refactor-dont-comment">Refactor Don&#8217;t Comment</a></h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Good code is like a good joke - it needs no explanation.</p>
</div>
</blockquote>
<div class="attribution">
&#8212; Russ Olsen
</div>
</div>
<div class="paragraph">
<p>Avoid writing comments to explain bad code. Refactor the code to
make it self-explanatory. ("Do, or do not. There is no try." --Yoda)</p>
</div>
</div>
<div class="sect2">
<h3 id="comment-annotations"><a class="anchor" href="#comment-annotations"></a><a class="link" href="#comment-annotations">Comment Annotations</a></h3>
<div class="sect3">
<h4 id="annotate-above"><a class="anchor" href="#annotate-above"></a><a class="link" href="#annotate-above">Annotate Above</a></h4>
<div class="paragraph">
<p>Annotations should usually be written on the line immediately above
the relevant code.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">some-fun</span><span class="w">
  </span><span class="p">[]</span><span class="w">
  </span><span class="c1">;; FIXME: Replace baz with the newer bar.</span><span class="w">
  </span><span class="p">(</span><span class="nf">baz</span><span class="p">))</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="c1">;; FIXME: Replace baz with the newer bar.</span><span class="w">
</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">some-fun</span><span class="w">
  </span><span class="p">[]</span><span class="w">
  </span><span class="p">(</span><span class="nf">baz</span><span class="p">))</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="annotate-keywords"><a class="anchor" href="#annotate-keywords"></a><a class="link" href="#annotate-keywords">Annotate Keywords</a></h4>
<div class="paragraph">
<p>The annotation keyword is followed by a colon and a space, then a note
describing the problem.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">some-fun</span><span class="w">
  </span><span class="p">[]</span><span class="w">
  </span><span class="c1">;; FIXME: Replace baz with the newer bar.</span><span class="w">
  </span><span class="p">(</span><span class="nf">baz</span><span class="p">))</span><span class="w">

</span><span class="c1">;; bad - no colon after annotation</span><span class="w">
</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">some-fun</span><span class="w">
  </span><span class="p">[]</span><span class="w">
  </span><span class="c1">;; FIXME Replace baz with the newer bar.</span><span class="w">
  </span><span class="p">(</span><span class="nf">baz</span><span class="p">))</span><span class="w">

</span><span class="c1">;; bad - no space after colon</span><span class="w">
</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">some-fun</span><span class="w">
  </span><span class="p">[]</span><span class="w">
  </span><span class="c1">;; FIXME:Replace baz with the newer bar.</span><span class="w">
  </span><span class="p">(</span><span class="nf">baz</span><span class="p">))</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="indent-annotations"><a class="anchor" href="#indent-annotations"></a><a class="link" href="#indent-annotations">Indent Annotations</a></h4>
<div class="paragraph">
<p>If multiple lines are required to describe the problem, subsequent
lines should be indented as much as the first one.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">some-fun</span><span class="w">
  </span><span class="p">[]</span><span class="w">
  </span><span class="c1">;; FIXME: This has crashed occasionally since v1.2.3. It may</span><span class="w">
  </span><span class="c1">;;        be related to the BarBazUtil upgrade. (xz 13-1-31)</span><span class="w">
  </span><span class="p">(</span><span class="nf">baz</span><span class="p">))</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">some-fun</span><span class="w">
  </span><span class="p">[]</span><span class="w">
  </span><span class="c1">;; FIXME: This has crashed occasionally since v1.2.3. It may</span><span class="w">
  </span><span class="c1">;; be related to the BarBazUtil upgrade. (xz 13-1-31)</span><span class="w">
  </span><span class="p">(</span><span class="nf">baz</span><span class="p">))</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="sign-and-date-annotations"><a class="anchor" href="#sign-and-date-annotations"></a><a class="link" href="#sign-and-date-annotations">Sign And Date Annotations</a></h4>
<div class="paragraph">
<p>Tag the annotation with your initials and a date so its relevance can
be easily verified.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">some-fun</span><span class="w">
  </span><span class="p">[]</span><span class="w">
  </span><span class="c1">;; FIXME: This has crashed occasionally since v1.2.3. It may</span><span class="w">
  </span><span class="c1">;;        be related to the BarBazUtil upgrade. (xz 13-1-31)</span><span class="w">
  </span><span class="p">(</span><span class="nf">baz</span><span class="p">))</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="rare-eol-annotations"><a class="anchor" href="#rare-eol-annotations"></a><a class="link" href="#rare-eol-annotations">Rare Eol Annotations</a></h4>
<div class="paragraph">
<p>In cases where the problem is so obvious that any documentation would
be redundant, annotations may be left at the end of the offending line
with no note. This usage should be the exception and not the rule.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">bar</span><span class="w">
  </span><span class="p">[]</span><span class="w">
  </span><span class="p">(</span><span class="nf">sleep</span><span class="w"> </span><span class="mi">100</span><span class="p">))</span><span class="w"> </span><span class="c1">; OPTIMIZE</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="todo"><a class="anchor" href="#todo"></a><a class="link" href="#todo"><code>TODO</code></a></h4>
<div class="paragraph">
<p>Use <code>TODO</code> to note missing features or functionality that should be
added at a later date.</p>
</div>
</div>
<div class="sect3">
<h4 id="fixme"><a class="anchor" href="#fixme"></a><a class="link" href="#fixme"><code>FIXME</code></a></h4>
<div class="paragraph">
<p>Use <code>FIXME</code> to note broken code that needs to be fixed.</p>
</div>
</div>
<div class="sect3">
<h4 id="optimize"><a class="anchor" href="#optimize"></a><a class="link" href="#optimize"><code>OPTIMIZE</code></a></h4>
<div class="paragraph">
<p>Use <code>OPTIMIZE</code> to note slow or inefficient code that may cause
performance problems.</p>
</div>
</div>
<div class="sect3">
<h4 id="hack"><a class="anchor" href="#hack"></a><a class="link" href="#hack"><code>HACK</code></a></h4>
<div class="paragraph">
<p>Use <code>HACK</code> to note "code smells" where questionable coding practices
were used and should be refactored away.</p>
</div>
</div>
<div class="sect3">
<h4 id="review"><a class="anchor" href="#review"></a><a class="link" href="#review"><code>REVIEW</code></a></h4>
<div class="paragraph">
<p>Use <code>REVIEW</code> to note anything that should be looked at to confirm it
is working as intended. For example: <code>REVIEW: Are we sure this is how the
client does X currently?</code></p>
</div>
</div>
<div class="sect3">
<h4 id="document-annotations"><a class="anchor" href="#document-annotations"></a><a class="link" href="#document-annotations">Document Custom Annotations</a></h4>
<div class="paragraph">
<p>Use other custom annotation keywords if it feels appropriate, but be
sure to document them in your project&#8217;s <code>README</code> or similar.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="documentation"><a class="anchor" href="#documentation"></a><a class="link" href="#documentation">Documentation</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Docstrings are the primary way to document Clojure code. Many definition forms
(e.g. <code>def</code>, <code>defn</code>, <code>defmacro</code>, <code>ns</code>)
support docstrings and usually it&#8217;s a good idea to make good use of them, regardless
of whether the var in question is something public or private.</p>
</div>
<div class="paragraph">
<p>If a definition form doesn&#8217;t support docstrings directly you can still supply them via
the <code>:doc</code> metadata attribute.</p>
</div>
<div class="paragraph">
<p>This section outlines some of the common conventions and best
practices for documenting Clojure code.</p>
</div>
<div class="sect2">
<h3 id="prefer-docstrings"><a class="anchor" href="#prefer-docstrings"></a><a class="link" href="#prefer-docstrings">Prefer Docstrings</a></h3>
<div class="paragraph">
<p>If a form supports docstrings directly prefer them over using <code>:doc</code> metadata:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">foo</span><span class="w">
  </span><span class="s">"This function doesn't do much."</span><span class="w">
  </span><span class="p">[]</span><span class="w">
  </span><span class="n">...</span><span class="p">)</span><span class="w">

</span><span class="p">(</span><span class="nf">ns</span><span class="w"> </span><span class="n">foo.bar.core</span><span class="w">
  </span><span class="s">"That's an awesome library."</span><span class="p">)</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">foo</span><span class="w">
  </span><span class="o">^</span><span class="p">{</span><span class="no">:doc</span><span class="w"> </span><span class="s">"This function doesn't do much."</span><span class="p">}</span><span class="w">
  </span><span class="p">[]</span><span class="w">
  </span><span class="n">...</span><span class="p">)</span><span class="w">

</span><span class="p">(</span><span class="nf">ns</span><span class="w"> </span><span class="o">^</span><span class="p">{</span><span class="no">:doc</span><span class="w"> </span><span class="s">"That's an awesome library."</span><span class="p">)</span><span class="w">
  </span><span class="n">foo.bar.core</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="docstring-summary"><a class="anchor" href="#docstring-summary"></a><a class="link" href="#docstring-summary">Docstring Summary</a></h3>
<div class="paragraph">
<p>Let the first line in the docstring be a complete, capitalized
sentence which concisely describes the var in question. This makes it
easy for tooling (Clojure editors and IDEs) to display a short a summary of
the docstring at various places.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">frobnitz</span><span class="w">
  </span><span class="s">"This function does a frobnitz.
  It will do gnorwatz to achieve this, but only under certain
  circumstances."</span><span class="w">
  </span><span class="p">[]</span><span class="w">
  </span><span class="n">...</span><span class="p">)</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">frobnitz</span><span class="w">
  </span><span class="s">"This function does a frobnitz. It will do gnorwatz to
  achieve this, but only under certain circumstances."</span><span class="w">
  </span><span class="p">[]</span><span class="w">
  </span><span class="n">...</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="markdown-docstrings"><a class="anchor" href="#markdown-docstrings"></a><a class="link" href="#markdown-docstrings">Leverage Markdown in Docstrings</a></h3>
<div class="paragraph">
<p>Important tools such as <a href="https://github.com/cljdoc/cljdoc/blob/master/doc/userguide/for-library-authors.adoc#docstrings">cljdoc</a> support Markdown in docstrings so leverage it for nicely formatted documentation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">qzuf-number</span><span class="w">
  </span><span class="s">"Computes the [Qzuf number](https://wikipedia.org/qzuf) of the `coll`.
  Supported options in `opts`:

  | key           | description |
  | --------------|-------------|
  | `:finite-uni?`| Assume finite universe; default: `false`
  | `:complex?`   | If OK to return a [complex number](https://en.wikipedia.org/wiki/Complex_number); default: `false`
  | `:timeout`    | Throw an exception if the computation doesn't finish within `:timeout` milliseconds; default: `nil`

  Example:
  ```clojure
  (when (neg? (qzuf-number [1 2 3] {:finite-uni? true}))
    (throw (RuntimeException. "</span><span class="n">Error</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">Universe!</span><span class="s">")))
  ```"</span><span class="w">
  </span><span class="p">[</span><span class="n">coll</span><span class="w"> </span><span class="n">opts</span><span class="p">]</span><span class="w">
  </span><span class="n">...</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="document-pos-arguments"><a class="anchor" href="#document-pos-arguments"></a><a class="link" href="#document-pos-arguments">Document Positional Arguments</a></h3>
<div class="paragraph">
<p>Document all positional arguments, and wrap them them with backticks
(`) so that editors and IDEs can identify them and potentially provide extra
functionality for them.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">watsitz</span><span class="w">
  </span><span class="s">"Watsitz takes a `frob` and converts it to a znoot.
  When the `frob` is negative, the znoot becomes angry."</span><span class="w">
  </span><span class="p">[</span><span class="n">frob</span><span class="p">]</span><span class="w">
  </span><span class="n">...</span><span class="p">)</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">watsitz</span><span class="w">
  </span><span class="s">"Watsitz takes a frob and converts it to a znoot.
  When the frob is negative, the znoot becomes angry."</span><span class="w">
  </span><span class="p">[</span><span class="n">frob</span><span class="p">]</span><span class="w">
  </span><span class="n">...</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="document-references"><a class="anchor" href="#document-references"></a><a class="link" href="#document-references">Document References</a></h3>
<div class="paragraph">
<p>Wrap any var references in the docstring with ` so that tooling
can identify them. Wrap them with <code>[[..]]</code> if you want to link to them.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">wombat</span><span class="w">
  </span><span class="s">"Acts much like `clojure.core/identity` except when it doesn't.
  Takes `x` as an argument and returns that. If it feels like it.
  See also [[kangaroo]]."</span><span class="w">
  </span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="w">
  </span><span class="n">...</span><span class="p">)</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">wombat</span><span class="w">
  </span><span class="s">"Acts much like clojure.core/identity except when it doesn't.
  Takes `x` as an argument and returns that. If it feels like it.
  See also kangaroo."</span><span class="w">
  </span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="w">
  </span><span class="n">...</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="docstring-grammar"><a class="anchor" href="#docstring-grammar"></a><a class="link" href="#docstring-grammar">Docstring Grammar</a></h3>
<div class="paragraph">
<p>Docstrings should be composed of well-formed English sentences. Every sentence
should start with a capitalized word, be gramatically coherent, and end
with appropriate punctuation. Sentences should be separated with a single space.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="k">def</span><span class="w"> </span><span class="n">foo</span><span class="w">
  </span><span class="s">"All sentences should end with a period (or maybe an exclamation mark).
  The sentence should be followed by a space, unless it concludes the docstring."</span><span class="p">)</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="k">def</span><span class="w"> </span><span class="n">foo</span><span class="w">
  </span><span class="s">"all sentences should end with a period (or maybe an exclamation mark).
  The sentence should be followed by a space, unless it concludes the docstring."</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="docstring-indentation"><a class="anchor" href="#docstring-indentation"></a><a class="link" href="#docstring-indentation">Docstring Indentation</a></h3>
<div class="paragraph">
<p>Indent multi-line docstrings by two spaces.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="nf">ns</span><span class="w"> </span><span class="n">my.ns</span><span class="w">
  </span><span class="s">"It is actually possible to document a ns.
  It's a nice place to describe the purpose of the namespace and maybe even
  the overall conventions used. Note how _not_ indenting the docstring makes
  it easier for tooling to display it correctly."</span><span class="p">)</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="nf">ns</span><span class="w"> </span><span class="n">my.ns</span><span class="w">
  </span><span class="s">"It is actually possible to document a ns.
It's a nice place to describe the purpose of the namespace and maybe even
the overall conventions used. Note how _not_ indenting the docstring makes
it easier for tooling to display it correctly."</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="docstring-leading-trailing-whitespace"><a class="anchor" href="#docstring-leading-trailing-whitespace"></a><a class="link" href="#docstring-leading-trailing-whitespace">Docstring Leading Trailing Whitespace</a></h3>
<div class="paragraph">
<p>Neither start nor end your docstrings with any whitespace.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="k">def</span><span class="w"> </span><span class="n">foo</span><span class="w">
  </span><span class="s">"I'm so awesome."</span><span class="w">
  </span><span class="mi">42</span><span class="p">)</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="k">def</span><span class="w"> </span><span class="n">silly</span><span class="w">
  </span><span class="s">"    It's just silly to start a docstring with spaces.
  Just as silly as it is to end it with a bunch of them.      "</span><span class="w">
  </span><span class="mi">42</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="docstring-after-fn-name"><a class="anchor" href="#docstring-after-fn-name"></a><a class="link" href="#docstring-after-fn-name">Docstring After Fn Name</a></h3>
<div class="paragraph">
<p>When adding a docstring&#8201;&#8212;&#8201;especially to a function using the above form&#8201;&#8212;&#8201;take
care to correctly place the docstring after the function name, not after the
argument vector.  The latter is not invalid syntax and won&#8217;t cause an error,
but includes the string as a form in the function body without attaching it to
the var as documentation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">foo</span><span class="w">
  </span><span class="s">"docstring"</span><span class="w">
  </span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="w">
  </span><span class="p">(</span><span class="nf">bar</span><span class="w"> </span><span class="n">x</span><span class="p">))</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="w">
  </span><span class="s">"docstring"</span><span class="w">
  </span><span class="p">(</span><span class="nf">bar</span><span class="w"> </span><span class="n">x</span><span class="p">))</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="existential"><a class="anchor" href="#existential"></a><a class="link" href="#existential">Existential</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="be-functional"><a class="anchor" href="#be-functional"></a><a class="link" href="#be-functional">Be Functional</a></h3>
<div class="paragraph">
<p>Code in a functional way, using mutation only when it makes sense.</p>
</div>
</div>
<div class="sect2">
<h3 id="be-consistent"><a class="anchor" href="#be-consistent"></a><a class="link" href="#be-consistent">Be Consistent</a></h3>
<div class="paragraph">
<p>Be consistent. In an ideal world, be consistent with these guidelines.</p>
</div>
</div>
<div class="sect2">
<h3 id="common-sense"><a class="anchor" href="#common-sense"></a><a class="link" href="#common-sense">Common Sense</a></h3>
<div class="paragraph">
<p>Use common sense.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="testing"><a class="anchor" href="#testing"></a><a class="link" href="#testing">Testing</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="test-directory-structure"><a class="anchor" href="#test-directory-structure"></a><a class="link" href="#test-directory-structure">Test Directory Structure</a></h3>
<div class="paragraph">
<p>Store your tests in a separate directory, typically <code>test/yourproject/</code> (as
opposed to <code>src/yourproject/</code>). Your build tool is responsible for making
them available in the contexts where they are necessary; most templates
will do this for you automatically.</p>
</div>
</div>
<div class="sect2">
<h3 id="test-ns-naming"><a class="anchor" href="#test-ns-naming"></a><a class="link" href="#test-ns-naming">Test Namespace Naming</a></h3>
<div class="paragraph">
<p>Name your ns <code>yourproject.something-test</code>, a file which usually lives in
<code>test/yourproject/something_test.clj</code> (or <code>.cljc</code>, <code>cljs</code>).</p>
</div>
</div>
<div class="sect2">
<h3 id="test-naming"><a class="anchor" href="#test-naming"></a><a class="link" href="#test-naming">Test Naming</a></h3>
<div class="paragraph">
<p>When using <code>clojure.test</code>, define your tests
with <code>deftest</code> and name them <code>something-test</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="clojure"><span class="c1">;; good</span><span class="w">
</span><span class="p">(</span><span class="nf">deftest</span><span class="w"> </span><span class="n">something-test</span><span class="w"> </span><span class="n">...</span><span class="p">)</span><span class="w">

</span><span class="c1">;; bad</span><span class="w">
</span><span class="p">(</span><span class="nf">deftest</span><span class="w"> </span><span class="n">something-tests</span><span class="w"> </span><span class="n">...</span><span class="p">)</span><span class="w">
</span><span class="p">(</span><span class="nf">deftest</span><span class="w"> </span><span class="n">test-something</span><span class="w"> </span><span class="n">...</span><span class="p">)</span><span class="w">
</span><span class="p">(</span><span class="nf">deftest</span><span class="w"> </span><span class="n">something</span><span class="w"> </span><span class="n">...</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="library-organization"><a class="anchor" href="#library-organization"></a><a class="link" href="#library-organization">Library Organization</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="lib-coordinates"><a class="anchor" href="#lib-coordinates"></a><a class="link" href="#lib-coordinates">Library Coordinates</a></h3>
<div class="paragraph">
<p>If you are publishing libraries to be used by others, make sure to
follow the <a href="https://central.sonatype.org/pages/choosing-your-coordinates.html">Central Repository
guidelines</a>
for choosing your <code>groupId</code> and <code>artifactId</code>. This helps to prevent
name conflicts and facilitates the widest possible use. A good
example is <a href="https://github.com/stuartsierra/component">Component</a> - its
coordinates are <code>com.stuartsierra/component</code>.</p>
</div>
<div class="paragraph">
<p>Another approach that&#8217;s popular in the wild is to use a project (or organization)
name as the <code>groupId</code> instead of domain name. Examples of such naming would be:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>cider/cider-nrepl</code></p>
</li>
<li>
<p><code>nrepl/nrepl</code></p>
</li>
<li>
<p><code>nrepl/drawbridge</code></p>
</li>
<li>
<p><code>clj-commons/fs</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="lib-min-dependencies"><a class="anchor" href="#lib-min-dependencies"></a><a class="link" href="#lib-min-dependencies">Minimize Dependencies</a></h3>
<div class="paragraph">
<p>Avoid unnecessary dependencies. For example, a three-line utility
function copied into a project is usually better than a dependency
that drags in hundreds of vars you do not plan to use.</p>
</div>
</div>
<div class="sect2">
<h3 id="lib-core-separate-from-tools"><a class="anchor" href="#lib-core-separate-from-tools"></a><a class="link" href="#lib-core-separate-from-tools">Tool-agnostic</a></h3>
<div class="paragraph">
<p>Deliver core functionality and integration points in separate
artifacts.  That way, consumers can consume your library without
being constrained by your unrelated tooling preferences. For example,
<a href="https://github.com/stuartsierra/component">Component</a> provides
core functionality, and
<a href="https://github.com/stuartsierra/reloaded">reloaded</a> provides leiningen
integration.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="lint-tools"><a class="anchor" href="#lint-tools"></a><a class="link" href="#lint-tools">Lint Tools</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are some lint tools created by the Clojure community that might aid you
in your endeavor to write idiomatic Clojure code.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/technomancy/slamhound">Slamhound</a> is a tool that will
automatically generate proper <code>ns</code> declarations from your existing code.</p>
</li>
<li>
<p><a href="https://github.com/jonase/kibit">kibit</a> is a static code analyzer for
Clojure which uses <a href="https://github.com/clojure/core.logic">core.logic</a> to
search for patterns of code for which there might exist a more idiomatic
function or macro.</p>
</li>
<li>
<p><a href="https://github.com/borkdude/clj-kondo">clj-kondo</a> is a linter that detects
a wide number of discouraged patterns and suggests improvements, based on this
style guide.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributing"><a class="anchor" href="#contributing"></a><a class="link" href="#contributing">Contributing</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Nothing written in this guide is set in stone. It&#8217;s my desire to work
together with everyone interested in Clojure coding style, so that we could
ultimately create a resource that will be beneficial to the entire Clojure
community.</p>
</div>
<div class="paragraph">
<p>Feel free to <a href="https://github.com/bbatsov/clojure-style-guide/issues">open pull requests</a> with improvements. Thanks in
advance for your help!</p>
</div>
<div class="paragraph">
<p>You can also support the style guide (and all my Clojure projects like
CIDER, nREPL, orchard, etc) with financial contributions via
<a href="https://www.patreon.com/bbatsov">Patreon</a> and
<a href="https://www.paypal.me/bbatsov">PayPal</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="license"><a class="anchor" href="#license"></a><a class="link" href="#license">License</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p><span class="image"><img src="https://i.creativecommons.org/l/by/3.0/88x31.png" alt="Creative Commons License"></span>
This work is licensed under a
<a href="https://creativecommons.org/licenses/by/3.0/deed.en_US">Creative Commons Attribution 3.0 Unported License</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="spread-the-word"><a class="anchor" href="#spread-the-word"></a><a class="link" href="#spread-the-word">Spread the Word</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>A community-driven style guide is of little use to a community that
doesn&#8217;t know about its existence. Tweet about the guide, share it with
your friends and colleagues. Every comment, suggestion or opinion we
get makes the guide just a little bit better. And we want to have the
best possible guide, don&#8217;t we?</p>
</div>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. *BSD/Solaris/Linux/OSX users are covered by default, Windows users have to be extra careful.
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2020-11-30 11:05:40 UTC
</div>
</div>
</body>
</html>